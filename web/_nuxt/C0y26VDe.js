import{ab as R,p as N,n as v,ak as B,ae as $,aD as y,s as C,af as j,ah as G,ai as T,ac as _,w as n,G as A,o as m,a as r,H as D,aB as F,J as V,c as J,am as O,az as x,aW as I,u as i,v as M,aI as b,l as h,m as g,b6 as P}from"./Dw1t9lvP.js";import{L as w}from"./b38gN-By.js";import"./DoZZNupk.js";import"./B9PxbImM.js";const K=R({__name:"lookstyle",setup(U){const p={id:-1,name:"Custom Load",thumbnail_path:"https://cdn.pixabay.com/photo/2023/02/27/15/15/abstract-7818693_1280.jpg"},S=P(),u=N(),{lookStyle:k}=v(u),d=B([]),L=t=>{const s=d.value.find(a=>a.id===t);s&&(u.setLookStyle(s),h().replace(g().generate("upload")))},E=async()=>{const t=await S.select(["json"]),s=t.blob,a=async o=>new Promise((l,c)=>{const e=new FileReader;e.onload=()=>l(e.result),e.onerror=()=>c(new Error("ファイルの読み込みに失敗しました")),e.readAsText(o)});try{const l=await(await fetch(s)).blob(),c=await a(l),e={...p,name:t.name.replace(".json","")};u.setLookStyle(e),u.setCustomWorkflow(JSON.parse(c)),h().push(g().generate("upload"))}catch(o){console.error("JSONの変換に失敗しました:",o)}};return $(async()=>{var t,s;if(!y().active)return C("利用プランが選択されていません。");try{const a=await j().template.lookStyle(((t=y().active)==null?void 0:t.id)??0);(s=a.list)!=null&&s.length&&(d.value=a.list.map(o=>({...o,thumbnail_path:""})))}catch(a){if(a instanceof G)T().error(a);else return C("ルックスタイルの取得に失敗しました。")}}),(t,s)=>{const a=D,o=M,l=V,c=A;return m(),_(c,{class:"pageGenerateLookstyle",gap:"28"},{default:n(()=>[r(a,null,{default:n(()=>[r(F,{icon:"colorSwatch",title:"ルックスタイルを選択してください",body:"プロジェクト専用のスタイルを選び、<br />作品の世界観を引き立てましょう。"})]),_:1}),r(a,{wide:""},{default:n(()=>[r(l,{justify:"center",gap:"8",split:"2"},{default:n(()=>[(m(!0),J(x,null,I(i(d),e=>(m(),_(o,{key:e.id,class:"pageGenerateLookstyle-item",onClick:f=>L(e.id)},{default:n(()=>{var f;return[r(w,{data:e,current:e.id===((f=i(k))==null?void 0:f.id)},null,8,["data","current"])]}),_:2},1032,["onClick"]))),128)),("useRuntimeConfig"in t?t.useRuntimeConfig:i(b))().public.DEV_ENABLED&&("useRuntimeConfig"in t?t.useRuntimeConfig:i(b))().public.ENVIRONMENT==="local"?(m(),_(o,{key:0,class:"pageGenerateLookstyle-item",onClick:E},{default:n(()=>{var e;return[r(w,{data:p,current:p.id===((e=i(k))==null?void 0:e.id)},null,8,["current"])]}),_:1})):O("",!0)]),_:1})]),_:1})]),_:1})}}});export{K as default};
