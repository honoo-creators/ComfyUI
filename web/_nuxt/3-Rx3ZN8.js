import{d as L,x as g,h as v,f as r,g as _,i as I,w as a,k as H,B as C,l as B,_ as M,z as l,F as z,G as D,E as N,Y as A,t as S,A as P,a2 as J,D as O,m as q,p as U,M as R,J as Y,L as K,U as Q,aG as X,aD as Z}from"./Cl2IasrX.js";import{_ as ee}from"./CnN9KWLt.js";import{_ as te}from"./B7q-GKuQ.js";const ae={class:"inputTag-label-inner"},le={key:0,class:"inputTag-label-required"},se=L({__name:"InputTag",props:{name:{type:String,default:"tag",required:!0},modelValue:{type:Array,default:[]},label:{type:String,default:""},placeholder:{type:String,default:"フリーテキストで追加"},max:{type:[Number,String],default:0},description:{type:String,default:""},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},gap:{type:[Number,String],default:8},focus:{type:Boolean,default:!1}},emits:{"update:modelValue":s=>!0,"enter-key-down":()=>!0,valid:()=>!0,invalid:s=>!0,focus:()=>!0,blur:()=>!0},setup(s,{emit:d}){const{darkmode:h}=R(),n=s,u=d,f=g("idle"),t=g(""),p=g(!1),y=g(!1),b=`inputTag-${n.name}`,$=g(""),i=v(()=>({[`_${f.value}`]:!0,_focus:p.value,_has:o.value.length>0})),o=v({get:()=>n.modelValue,set:e=>{u("update:modelValue",e)}}),k=v(()=>{let e=!0;return n.max&&(e=o.value.length<Number.parseInt(String(n.max))),e}),V=v(()=>{var x;const e=n.placeholder.length,c=(x=t.value)==null?void 0:x.length;return{minWidth:`${Math.max(e,c)}em`}}),w=v(()=>{let e=n.placeholder;return n.label&&!p.value&&(e=""),e}),F=()=>{t.value&&!o.value.includes(t.value)&&(o.value.push(t.value),t.value=""),T()},E=e=>{o.value.splice(o.value.indexOf(e),1),T()},G=()=>{t.value.includes(`
`)&&(t.value=t.value.replace(/\n/g,""),F())},W=()=>{p.value=!0,u("focus")},j=()=>{p.value=!1,u("blur"),t.value&&F(),T()},T=()=>{let e="";!o.value.length&&n.required&&(e="入力してください。"),e?(f.value="invalid",u("invalid",e),$.value=e):(f.value="valid",u("valid"),$.value="")};return(e,c)=>(r(),_("div",{class:U(["inputTag",i.value]),onMouseover:c[1]||(c[1]=m=>y.value=!0),onMouseleave:c[2]||(c[2]=m=>y.value=!1)},[s.label?(r(),I(M,{key:0,tag:"label",for:b,class:"inputTag-label"},{default:a(()=>[H("span",ae,C(s.label),1),s.required?(r(),_("span",le,"*")):B("",!0)]),_:1})):B("",!0),l(S,q({class:"inputTag-items"},{gap:s.gap},{justify:"start",align:"stretch"}),{default:a(()=>[(r(!0),_(z,null,D(o.value,(m,x)=>(r(),I(N,{key:`inputTag-items-item-${x}`,class:"inputTag-items-item",pt:"3.2",pb:"4.8",pl:"8",pr:"4",r:"2",color:A(h)?"light":"dark",relative:"","inline-block":""},{default:a(()=>[l(S,{gap:"4",align:"center"},{default:a(()=>[l(M,{body:"",bold:"",lineclamp:"1",color:A(h)?"dark":"light"},{default:a(()=>[P(C(m),1)]),_:2},1032,["color"]),l(J,{minimal:"",xsmall:"",w:"20",h:"20",onClick:ue=>E(m)},{default:a(()=>[l(N,{pt:"2",mr:"-4"},{default:a(()=>[l(O,{name:"cross",size:"10",color:"light"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["color"]))),128)),l(S,{align:"center",style:{width:"auto"}},{default:a(()=>[k.value?(r(),I(ee,q({key:0,id:b,modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=m=>t.value=m),style:V.value,placeholder:w.value,type:"text",rows:"1",autoheight:!1},{name:s.name,focus:s.focus},{onInput:G,onFocus:W,onBlur:j}),null,16,["modelValue","style","placeholder"])):B("",!0)]),_:1})]),_:1},16)],34))}}),ne={class:"promptInput"},ce=L({__name:"PromptInput",props:Y({name:{type:String,required:!0},placeholder:{type:String,required:!0},list:{type:Array,default:()=>[]}},{selects:{},selectsModifiers:{}}),emits:["update:selects"],setup(s){const d=K(s,"selects"),h=n=>{var u;(u=d.value)==null||u.push(n)};return(n,u)=>{const f=se,t=M,p=te,y=Q,b=S,$=X;return r(),_("div",ne,[l(y,{gap:"0"},{default:a(()=>[l(t,{body:"",bold:""},{default:a(()=>[l(f,q({modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=i=>d.value=i),name:"promptA"},{placeholder:s.placeholder},{max:"10",gap:"4",focus:""}),null,16,["modelValue"])]),_:1}),l(p)]),_:1}),l($,{class:"promptInput-tags"},{default:a(()=>[l(b,{gap:"4"},{default:a(()=>[(r(!0),_(z,null,D(s.list,(i,o)=>{var k,V;return r(),I(Z,{key:`promptInput-tags-item-${o}`,class:U(`promptInput-tags-item${(k=d.value)!=null&&k.includes(i)?" _selected":""}`),disabled:(V=d.value)==null?void 0:V.includes(i),onClick:w=>h(i)},{default:a(()=>[l(t,{caption2:"",bold:""},{default:a(()=>[P(C(i),1)]),_:2},1024)]),_:2},1032,["class","disabled","onClick"])}),128))]),_:1})]),_:1})])}}});export{ce as _};
