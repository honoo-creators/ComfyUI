import{a8 as N,as as m,aj as v,au as F,ad as p,o as r,a6 as C,a5 as y,av as b,y as x,ai as w,l as e,aA as G,a_ as O,D as q,v as H,m as L,al as M,w as P,k as R,z as J,aY as Y,i as K,an as S,ab as Q,a as W,ag as X,s as Z,C as h}from"./CzcKg6T0.js";import{_ as ee}from"./C_r55cHj.js";const se=()=>({INVITE_CODE_LENGTH:16}),te=N({__name:"EnterpriseCodeInput",props:{modelValue:{type:String,default:"",required:!0},status:{type:String,default:"",validator:u=>["","progress","ok","ng"].includes(u)},message:{type:String,default:""}},emits:["update:modelValue","valid","invalid","focus","blur"],setup(u,{emit:i}){const{INVITE_CODE_LENGTH:o}=se(),{upperCaseAlphanumericPattern:l}=G(),s=u,n=i,c=m(""),V=v(()=>({[`_${s.status}`]:!0})),g=v({get:()=>s.modelValue,set:d=>{n("update:modelValue",d)}}),f=v(()=>s.status==="ok"?"招待コードを確認しました。":s.status==="ng"?"":`半角英数字${o}桁で入力してください。`),t=v(()=>s.status==="progress"),k=v(()=>s.status==="progress"||s.status==="ok"),$=v(()=>s.status==="ng"),I=()=>{c.value="",n("valid")},_=()=>{c.value=`半角英数字${o}桁で入力してください。`,n("invalid")},T=d=>{const a=d.target;a.value=a.value.toUpperCase(),g.value=a.value,a.value.length===o?I():_()};return F(()=>s.message,d=>{d&&(c.value=d)}),(d,a)=>{const j=ee,B=q,D=x,A=H,z=L,U=P;return r(),p(U,{class:M(["enterpriseCodeInput",e(V)]),title2:""},{default:C(()=>[y(D,{justify:"center"},{default:C(()=>[y(j,w({modelValue:e(g),"onUpdate:modelValue":a[0]||(a[0]=E=>O(g)?g.value=E:null),class:"enterpriseCodeInput-field",name:"email",type:"email",label:"エンタープライズコード",placeholder:"",limitlength:e(o),validation:"always",pattern:e(l),required:""},{disabled:e($),readonly:e(k)},{onValid:I,onInvalid:_,onFocus:a[1]||(a[1]=E=>n("focus")),onBlur:a[2]||(a[2]=E=>n("blur")),onInput:T}),null,16,["modelValue","limitlength","pattern"]),y(B,w({message:e(c),fail:u.status==="ng"},{description:e(f)}),null,16,["message","fail"])]),_:1}),e(t)?(r(),p(A,{key:0,class:"enterpriseCodeInput-icon",size:"16",color:"text060"})):u.status==="ok"?(r(),p(z,{key:1,class:"enterpriseCodeInput-icon",name:"check",size:"16",color:"success"})):u.status==="ng"?(r(),p(z,{key:2,class:"enterpriseCodeInput-icon",name:"cross",size:"16",color:"danger"})):b("",!0)]),_:1},8,["class"])}}}),ae={class:"pageJoin"},le=N({__name:"join",setup(u){const i=m(""),o=m(!1),l=m(""),s=m(""),n=m(!1),c=m(new Date().toISOString()),V=async()=>{o.value=!0,l.value="progress",s.value="";try{const{organization_id:f,organization_name:t}=await Q().member.join.organization(i.value);await W().open({name:"joinOrganization",options:{id:f,name:t}})}catch(f){if(l.value="ng",s.value="無効な招待コードです。",!(f instanceof X))return Z({statusCode:Number(h.UnknownError),statusMessage:"不明なエラーが発生しました。"})}finally{o.value=!1}},g=()=>{i.value="",l.value="",s.value="",n.value=!1,c.value=new Date().toISOString()};return(f,t)=>{const k=K,$=x,I=J;return r(),R("div",ae,[y(I,{narrow:""},{default:C(()=>[y($,{class:"pageGenerateConfirm",gap:"28"},{default:C(()=>[y(Y,{icon:"code",title:"追加するコードをご入力ください"}),(r(),p(te,w({key:e(c),modelValue:e(i),"onUpdate:modelValue":t[0]||(t[0]=_=>O(i)?i.value=_:null)},{status:e(l),message:e(s)},{onValid:t[1]||(t[1]=_=>n.value=!0),onInvalid:t[2]||(t[2]=_=>n.value=!1)}),null,16,["modelValue"])),e(l)!=="ng"?(r(),p(k,{key:0,disabled:!e(n),loading:e(o),onClick:V},{default:C(()=>t[3]||(t[3]=[S(" 送信 ")])),_:1},8,["disabled","loading"])):b("",!0),e(l)==="ng"?(r(),p(k,{key:1,onClick:g},{default:C(()=>t[4]||(t[4]=[S(" クリア ")])),_:1})):b("",!0)]),_:1})]),_:1})])}}});export{le as default};
