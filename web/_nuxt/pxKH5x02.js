import{d as P,c as R,f as r,k as w,w as a,l as A,m as I,p as Y,v as ue,r as O,q as B,t as ae,x as re,_ as z,y as x,z as y,A as se,g as V,h as t,B as L,D as W,E as T,F as G,G as j,H as oe,I as ie,J,K,L as ce,M as de,N,O as me,P as pe,Q as q,o as fe,R as _e,S as ve,T as ye,U as ge,V as X,W as he,X as we,u as be,Y as ke,i as M,Z,$ as Se,e as $e,a0 as ee,a1 as F,a2 as Ce,a3 as Me,a4 as De}from"./CvNwVGvF.js";import{_ as Ue}from"./Bs2x_OA6.js";import{u as ze}from"./CKGx6a2W.js";import{u as te}from"./DuSZBVOy.js";const Ie=["id"],xe=["for"],Q=P({__name:"Switch",props:{name:{type:String,default:"switch",required:!0},modelValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(f,{emit:$}){const l=f,i=$,u=R(()=>({_checked:c.value,_disabled:l.disabled,_readonly:l.readonly})),m=R(()=>`switch-${l.name}`),c=R({get:()=>l.modelValue,set:C=>{i("update:modelValue",C)}}),b=R(()=>!!re().default);return(C,v)=>{const D=z,o=x;return r(),w(o,{class:ae(["switch",u.value]),gap:"8",align:"start"},{default:a(()=>[A(I("input",Y({id:m.value,"onUpdate:modelValue":v[0]||(v[0]=s=>c.value=s),type:"checkbox",class:"switch-input"},{disabled:f.disabled,readonly:f.readonly,name:f.name}),null,16,Ie),[[ue,c.value]]),I("label",{for:m.value,class:"switch-handle"},null,8,xe),b.value?(r(),w(D,{key:0,tag:"label",for:m.value,class:"switch-label",caption2:""},{default:a(()=>[O(C.$slots,"default")]),_:3},8,["for"])):B("",!0)]),_:3},8,["class"])}}}),Ve={class:"devMenu"},ne=P({__name:"DevMenu",props:{name:{type:String,default:""},open:{type:Boolean,default:!1},children:{type:Array,default:()=>[]}},setup(f){const $=f,l=y($.open),i=y(0),u=R(()=>$.children.length>0),m=()=>{u.value&&(l.value=!l.value)},c=b=>"children"in b;return(b,C)=>{const v=ne,D=se("resize");return r(),V("div",Ve,[t(x,{class:"devMenu-header",justify:"between",align:"center",gap:"8",onClick:m},{default:a(()=>[t(z,{class:"devMenu-header-txt",body:"",bold:"",lineclamp:"1"},{default:a(()=>[L(W(f.name),1)]),_:1}),u.value?(r(),w(T,{key:0,class:"devMenu-header-icon",name:l.value?"arrowUp":"arrowDown",size:"10"},null,8,["name"])):B("",!0)]),_:1}),t(G,{h:i.value},{default:a(()=>[t(Ue,null,{default:a(()=>[u.value?A((r(),w(G,{key:0,class:"devMenu-children"},{default:a(()=>[(r(!0),V(j,null,oe(f.children,(o,s)=>(r(),V(j,{key:`devMenu-children-item-${s}`},[c(o)?(r(),w(v,Y({key:0,ref_for:!0},o),null,16)):(r(),w(ie,{key:1,class:"devMenu-children-item","active-class":"_current",to:{name:o.page}},{default:a(()=>[t(z,{caption1:"",bold:"",lineclamp:"1"},{default:a(()=>[L(W(o.name),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))]),_:1})),[[J,l.value],[D,o=>i.value=o.height]]):B("",!0)]),_:1})]),_:1},8,["h"])])}}}),Le={class:"devHeader-menus"},qe={class:"devHeader-menus-inner-list"},Be=P({__name:"DevHeader",props:K({close:{type:Boolean,default:!1}},{showMenu:{type:Boolean,required:!1},showMenuModifiers:{}}),emits:K(["close","darkmode","sizeAuto"],["update:showMenu"]),setup(f,{emit:$}){const l=ce(),i=de(f,"showMenu"),u=$,m=y(N().darkmode.value),c=y(N().sizeType.value==="auto"),b=y(""),C=me().getRoutes(),v=y([]),D=()=>{const o=C,s=we().path.value,e={name:"Dev",children:[],open:!1};o.forEach(n=>{if(!n.path.startsWith(s))return;const k=n.path.replace(s,"").split("/").filter(p=>p.length>0);let _=e;k.forEach((p,g)=>{if(g===k.length-1)_.children.push({name:p.charAt(0).toUpperCase()+p.slice(1).replace(/-/g," "),page:n.name});else{let d=_.children.find(h=>"children"in h&&h.name.toLowerCase()===p);d||(d={name:p.charAt(0).toUpperCase()+p.slice(1),children:[],open:!1},_.children.push(d)),_=d}})}),v.value=e.children.filter(n=>"children"in n&&"open"in n&&!("page"in n))};return pe(()=>{const o=l.name;for(const s of v.value)for(const e of s.children)e.page===o&&(s.open=!0,b.value=e.name)}),q(()=>l.path,o=>{i.value=!1},{immediate:!0}),q(()=>m.value,o=>{N().setDarkmode(o),u("darkmode",o)}),q(()=>c.value,o=>{o?N().setSizeType("auto"):N().setSizeType("px"),u("sizeAuto",o)}),fe(()=>{D()}),(o,s)=>(r(),w(he,{class:"devHeader",full:"","no-padding":""},{default:a(()=>[t(_e,null,{left:a(()=>[O(o.$slots,"left")]),center:a(()=>[t(z,{body:"",bold:""},{default:a(()=>[t(x,{class:"devHeader-title",gap:"8",justify:"center",align:"center",onClick:s[0]||(s[0]=e=>i.value=!i.value)},{default:a(()=>[L(W(b.value)+" ",1),t(T,{name:"arrowDown",size:"10"})]),_:1})]),_:1})]),right:a(()=>[f.close?(r(),w(T,{key:0,name:"cross",size:"20",onClick:s[1]||(s[1]=e=>u("close"))})):B("",!0)]),_:3}),t(ve,null,{default:a(()=>[A(t(ye,{class:"devHeader-overlay",soft:"",onClick:s[2]||(s[2]=e=>i.value=!1)},null,512),[[J,i.value]])]),_:1}),t(ge,{y:"-20"},{default:a(()=>[A(I("div",Le,[t(X,{class:"devHeader-menus-inner"},{default:a(()=>[I("div",qe,[(r(!0),V(j,null,oe(v.value,(e,n)=>(r(),w(ne,Y({key:`global-${n}`,class:"devHeader-menus-inner-list-item",ref_for:!0},e),null,16))),128))]),t(X,{class:"devHeader-menus-inner-mode",gap:"8"},{default:a(()=>[O(o.$slots,"footer"),t(x,{justify:"between",align:"center",nowrap:""},{default:a(()=>[t(z,{body:"",bold:""},{default:a(()=>s[5]||(s[5]=[L(" Darkmode ")])),_:1}),I("div",null,[t(Q,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=e=>m.value=e),name:"devDarkmode"},null,8,["modelValue"])])]),_:1}),t(x,{justify:"between",align:"center",nowrap:""},{default:a(()=>[t(z,{body:"",bold:""},{default:a(()=>s[6]||(s[6]=[L(" SizeType Auto ")])),_:1}),I("div",null,[t(Q,{modelValue:c.value,"onUpdate:modelValue":s[4]||(s[4]=e=>c.value=e),name:"devSizetype"},null,8,["modelValue"])])]),_:1})]),_:3})]),_:3})],512),[[J,i.value]])]),_:3})]),_:3}))}}),Ee={class:"pageDev"},Te=P({__name:"dev",setup(f){const $=be(),l=ze(),i=y(0),u=y(!1),m=y(!1),c=y(0),b=y(!0),C=()=>{Se().push($e().dashboard())},v=e=>{var n,k,_,p,g,d,h,S,U,H;(n=document.querySelector("body > .comfyui-body-top"))==null||n.classList.toggle("_show",e),(k=document.querySelector("body > .comfyui-body-right"))==null||k.classList.toggle("_show",e),(_=document.querySelector("body > .comfyui-body-bottom"))==null||_.classList.toggle("_show",e),(p=document.querySelector("body > .comfyui-body-left"))==null||p.classList.toggle("_show",e),(g=document.querySelector("body > .comfy-menu"))==null||g.classList.toggle("_show",e),(d=document.querySelector("body > .graph-canvas-container"))==null||d.classList.toggle("_show",e),(h=document.querySelector("body > .pysssss-image-feed"))==null||h.classList.toggle("_show",e),(S=document.querySelector("body > .p-toast"))==null||S.classList.toggle("_show",e),(U=document.querySelector("body > #vue-app"))==null||U.classList.toggle("_show",e),ee().public.COMFYUI_GENERATE_ENABLED||(H=document.querySelector(".queue-button-group"))==null||H.classList.toggle("_disabled"),m.value=!1},D=async()=>{if(!await F().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"<mark>Step 1. Upload Image</mark> 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const e=await te().select(["image"]),n=await l.upload.image(e.file);if(!await F().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br /><mark>Step 2. Select Workflow.json</mark> 👈",buttonName:"Select Workflow.json"}}))return;const k=await te().select(["json"]),_=new FileReader;_.readAsText(k.file),_.onload=async p=>{var h;const g=(h=p.target)==null?void 0:h.result,d=JSON.parse(g);d.nodes&&d.nodes.forEach(S=>{S.type==="LoadImage"&&S.widgets_values&&(S.widgets_values=S.widgets_values.map(U=>typeof U=="string"?n.name:U))}),await l.loadGraph(JSON.stringify(d)),b.value=!1}},o=async()=>{c.value=0,await l.queuePrompt()},s=async()=>{c.value=0,await l.postInterrupt()};return q(()=>u.value,e=>{v(e),e&&!ee().public.COMFYUI_GENERATE_ENABLED&&F().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),q(()=>i.value,e=>{var n;(n=document.querySelector("body > .comfyui-body-top"))==null||n.style.setProperty("top",`${e}px`)}),q(()=>l.progress.value,e=>{c.value=e}),ke(()=>{u.value=!1,v(!1)}),(e,n)=>{const k=z,_=G,p=Q,g=T,d=Ce,h=x,S=Be,U=Me,H=De,le=se("resize");return r(),V("div",Ee,[M($).path.includes("login")?B("",!0):A((r(),w(S,{key:0,"show-menu":M(m),"onUpdate:showMenu":n[1]||(n[1]=E=>Z(m)?m.value=E:null),class:"pageDev-menu",close:"",onClose:C},{left:a(()=>[t(h,{align:"center",gap:"16",nowrap:""},{default:a(()=>[t(p,{modelValue:M(u),"onUpdate:modelValue":n[0]||(n[0]=E=>Z(u)?u.value=E:null),name:"showComfyUI"},{default:a(()=>[t(_,{pt:"2"},{default:a(()=>[t(k,{caption3:"",bold:"",unselectable:""},{default:a(()=>n[2]||(n[2]=[L(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),M(u)?(r(),V(j,{key:0},[t(d,{xsmall:"",w:"16",h:"16",disabled:M(c)>0,onClick:o},{default:a(()=>[t(g,{name:"play",color:"light"})]),_:1},8,["disabled"]),t(d,{xsmall:"",w:"16",h:"16",disabled:M(c)===0,onClick:s},{default:a(()=>[t(g,{name:"pause",color:"light"})]),_:1},8,["disabled"]),t(d,{xsmall:"",link:"",w:"16",h:"16",onClick:D},{default:a(()=>[t(g,{name:"upload",size:"16"})]),_:1})],64)):B("",!0)]),_:1})]),_:1},8,["show-menu"])),[[le,E=>i.value=E.height]]),t(H,{class:ae(["pageDev-pages",{_hide:M(u)}]),center:"","top-space":M(i),"bottom-space":"50"},{default:a(()=>[t(U)]),_:1},8,["class","top-space"])])}}});export{Te as default};
