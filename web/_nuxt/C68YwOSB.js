import{d as N,h as y,c as v,o as n,j as h,a as m,w as t,e as F,B as C,f as b,_ as $,k as s,F as z,D,C as q,Q as j,g as I,A as L,q as E,l as Q,m as w,ae as R,n as A,x as G,O as K,af as J,ag as X,ah as Y,aa as Z}from"./DnIVQ8ma.js";import{_ as ee}from"./DpRo91dN.js";const te={class:"inputTag-label-inner"},ae={key:0,class:"inputTag-label-required"},le=N({__name:"InputTag",props:{name:{type:String,default:"tag",required:!0},modelValue:{type:Array,default:[]},label:{type:String,default:""},placeholder:{type:String,default:"フリーテキストで追加"},max:{type:[Number,String],default:0},description:{type:String,default:""},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},gap:{type:[Number,String],default:8},focus:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,"enter-key-down":()=>!0,valid:()=>!0,invalid:e=>!0,focus:()=>!0,blur:()=>!0},setup(e,{emit:r}){const{darkmode:f}=G(),o=e,l=r,_=y("idle"),u=y(""),g=y(!1),k=y(!1),x=`inputTag-${o.name}`,S=y(""),d=v(()=>({[`_${_.value}`]:!0,_focus:g.value,_has:i.value.length>0})),i=v({get:()=>o.modelValue,set:a=>{l("update:modelValue",a)}}),T=v(()=>{let a=!0;return o.max&&(a=i.value.length<Number.parseInt(String(o.max))),a}),V=v(()=>{var B;const a=o.placeholder.length,c=(B=u.value)==null?void 0:B.length;return{minWidth:`${Math.max(a,c)}em`}}),H=v(()=>{let a=o.placeholder;return o.label&&!g.value&&(a=""),a}),P=()=>{u.value&&!i.value.includes(u.value)&&(i.value.push(u.value),u.value=""),M()},O=a=>{i.value.splice(i.value.indexOf(a),1),M()},U=()=>{g.value=!0,l("focus")},W=()=>{g.value=!1,l("blur"),u.value&&P(),M()},M=()=>{let a="";!i.value.length&&o.required&&(a="入力してください。"),a?(_.value="invalid",l("invalid",a),S.value=a):(_.value="valid",l("valid"),S.value="")};return(a,c)=>(n(),h("div",{class:A(["inputTag",d.value]),onMouseover:c[1]||(c[1]=p=>k.value=!0),onMouseleave:c[2]||(c[2]=p=>k.value=!1)},[e.label?(n(),m($,{key:0,tag:"label",for:x,class:"inputTag-label"},{default:t(()=>[F("span",te,C(e.label),1),e.required?(n(),h("span",ae,"*")):b("",!0)]),_:1})):b("",!0),s(I,w({class:"inputTag-items"},{gap:e.gap},{justify:"start",align:"stretch"}),{default:t(()=>[(n(!0),h(z,null,D(i.value,(p,B)=>(n(),m(q,{key:`inputTag-items-item-${B}`,class:"inputTag-items-item",pt:"3.2",pb:"4.8",pl:"8",pr:"4",r:"2",color:j(f)?"light":"dark",relative:"","inline-block":""},{default:t(()=>[s(I,{gap:"4",align:"center"},{default:t(()=>[s($,{body:"",bold:"",lineclamp:"1",color:j(f)?"dark":"light"},{default:t(()=>[L(C(p),1)]),_:2},1032,["color"]),s(E,{minimal:"",xsmall:"",w:"20",h:"20",onClick:ue=>O(p)},{default:t(()=>[s(q,{pt:"2",mr:"-4"},{default:t(()=>[s(Q,{name:"cross",size:"10",color:"light"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["color"]))),128)),s(I,{align:"center",style:{width:"auto"}},{default:t(()=>[T.value?(n(),m(ee,w({key:0,id:x,modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=p=>u.value=p),style:V.value,placeholder:H.value,type:"text"},{name:e.name,focus:e.focus},{onKeyup:R(P,["enter"]),onFocus:U,onBlur:W}),null,16,["modelValue","style","placeholder"])):b("",!0)]),_:1})]),_:1},16)],34))}}),se=["innerHTML"],ne=N({__name:"FieldFooter",props:{description:{type:String,default:""},message:{type:String,default:""},focus:{type:Boolean,default:!1},fail:{type:Boolean,default:!1}},setup(e){const r=e,f=v(()=>({_focus:r.focus,_fail:r.fail}));return(o,l)=>(n(),m(K,{class:A(["fieldFooter",f.value]),gap:"8"},{default:t(()=>[l[0]||(l[0]=F("div",{class:"fieldFooter-border"},[F("div",{class:"fieldFooter-border-inner"})],-1)),e.message||e.description?(n(),m(q,{key:0,w:"100%"},{default:t(()=>[e.message?(n(),m($,{key:0,caption3:"",color:"danger"},{default:t(()=>[L(C(e.message),1)]),_:1})):e.description?(n(),m($,{key:1,caption3:"",color:"dark60"},{default:t(()=>[F("span",{innerHTML:e.description},null,8,se)]),_:1})):b("",!0)]),_:1})):b("",!0)]),_:1},8,["class"]))}}),oe={class:"promptInput"},de=N({__name:"PromptInput",props:J({name:{type:String,required:!0},placeholder:{type:String,required:!0},list:{type:Array,default:()=>[]}},{selects:{},selectsModifiers:{}}),emits:["update:selects"],setup(e){const r=X(e,"selects"),f=o=>{var l;(l=r.value)==null||l.push(o)};return(o,l)=>{const _=le,u=$,g=ne,k=K,x=I,S=Y;return n(),h("div",oe,[s(k,{gap:"0"},{default:t(()=>[s(u,{body:"",bold:""},{default:t(()=>[s(_,w({modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value=d),name:"promptA"},{placeholder:e.placeholder},{max:"10",gap:"4",focus:""}),null,16,["modelValue"])]),_:1}),s(g)]),_:1}),s(S,{class:"promptInput-tags"},{default:t(()=>[s(x,{gap:"4"},{default:t(()=>[(n(!0),h(z,null,D(e.list,(d,i)=>{var T,V;return n(),m(Z,{key:`promptInput-tags-item-${i}`,class:A(`promptInput-tags-item${(T=r.value)!=null&&T.includes(d)?" _selected":""}`),disabled:(V=r.value)==null?void 0:V.includes(d),onClick:H=>f(d)},{default:t(()=>[s(u,{caption2:"",bold:""},{default:t(()=>[L(C(d),1)]),_:2},1024)]),_:2},1032,["class","disabled","onClick"])}),128))]),_:1})]),_:1})])}}});export{de as _};
