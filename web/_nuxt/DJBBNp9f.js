import{d as b,h as A,c as C,i as G,K as U,X as k,o as r,a as m,w as e,k as t,m as q,Q as o,j as I,D as K,F as Y,A as y,f as D,ai as h,U as w,g as F,a2 as Q,q as V,O as H,a9 as J,a7 as X,Y as x,aj as z}from"./DqChA8-F.js";import{_ as W}from"./CONSToNX.js";import{_ as Z}from"./CX3bpM7S.js";import{_ as T}from"./3HvByESk.js";import{u as ee}from"./CZ6SCVYy.js";import"./Bt1NFM7b.js";const E=3,_=9,re=b({__name:"output",setup(te){const{isQueue:u,queueRemaining:O,output:l,estimatedTime:L}=k(),d=ee(),a=A(0),N=C(()=>`${_-O.value}/${_}`),S=C(()=>{if(!u.value)return"背景美術を生成しました。";const n=Math.floor(a.value/36e5),s=Math.floor(a.value%36e5/6e4),f=Math.floor(a.value%6e4/1e3);let i="";return n>0&&(i+=`${n}時間`),s>0&&(i+=`${s}分`),i+=`${f}秒`,u.value&&a.value<=0?"...":`あと ${i}`}),R=()=>{h(w().GENERATE_LOOKSTYLE)},j=()=>{d.init(),h(w().GENERATE_LOOKSTYLE)},g=async()=>{await z().wait(1e3),a.value-=1e3,a.value>=0?g():a.value=0},B=n=>{X().open({name:"imagePreview",options:{list:l.value,index:n}})};return G(()=>L.value,n=>{n>0&&a.value<=0&&g(),a.value=n}),U(()=>{k().queuePrompt({json:JSON.stringify(d.workflow),batchCount:_})}),(n,s)=>{const f=x,i=W,M=Z,P=F,v=Q,$=V,p=H;return r(),m(p,{class:"pageOutput",gap:"36"},{default:e(()=>[t(T,q({title:o(N),body:o(S)},{spinner:o(u),icon:o(u)?"":"shine"}),null,16,["spinner","icon"]),t(v,{wide:""},{default:e(()=>[t(P,{gap:"2",split:E},{default:e(()=>[(r(),I(Y,null,K(_,c=>t(M,{key:`pageOutput-item-${c}`},{default:e(()=>[o(l)[c-1]?(r(),m(J,{key:0,class:"pageOutput-img",onClick:ae=>B(c-1)},{default:e(()=>[t(f,{src:o(l)[c-1],cover:""},null,8,["src"])]),_:2},1032,["onClick"])):(r(),m(i,{key:1,w:"100%",h:"100%",animation:"",delay:c/E*150},null,8,["delay"]))]),_:2},1024)),64))]),_:1})]),_:1}),o(l).length>0&&!o(u)?(r(),m(p,{key:0,justify:"center",gap:"40"},{default:e(()=>[t(T,{icon:"checkCircleLine",body:"生成画像は以上です"}),t(v,null,{default:e(()=>[t(p,{justify:"stretch",gap:"20"},{default:e(()=>[t($,{onClick:R},{default:e(()=>s[0]||(s[0]=[y(" 設定を変更してやり直す ")])),_:1}),t($,{info:"",onClick:j},{default:e(()=>s[1]||(s[1]=[y(" 新しい背景美術を生成する ")])),_:1})]),_:1})]),_:1})]),_:1})):D("",!0)]),_:1})}}});export{re as default};
