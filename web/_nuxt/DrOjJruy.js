import{aa as V,af as s,ag as p,aL as D,ab as E,aQ as I,aR as N,o as f,c as g,aE as C,aS as F,aB as y,am as R,ai as K,w as L,aM as T,aj as b,D as j,aG as z,aT as G}from"./CJQxQ-sn.js";const H=["autocomplete","maxlength"],O={class:"input-label-inner"},P={key:0,class:"input-label-required"},U=V({__name:"Input",props:{name:{type:String,default:"field",required:!0},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{type:String,default:"",required:!0},autocomplete:{type:Boolean,default:!1},pattern:{type:String},patternMismatchMessage:{type:String,default:"入力形式が正しくありません。"},maxlength:{type:[Number,String]},limitlength:{type:[Number,String]},required:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},noSpin:{type:Boolean,default:!1},validation:{type:String,default:"blur",validator:a=>["always","blur"].includes(a)}},emits:{"update:modelValue":a=>!0,"enter-key-down":()=>!0,valid:()=>!0,invalid:a=>!0,focus:()=>!0,blur:()=>!0},setup(a,{emit:h}){const{noOnlySpace:x}=G(),e=a,u=h,i=s("idle"),S=s(null),d=s(e.focus),m=s(!1),v=`input-${e.name}`,r=s(""),B=p(()=>({[`_${i.value}`]:!0,_focus:d.value,_input:l.value.length,_readonly:e.readonly,_noLabel:!e.label,_disabled:e.disabled,_noSpin:e.noSpin})),l=p({get:()=>e.modelValue,set:t=>{u("update:modelValue",t)}});D(()=>e.modelValue,()=>{(e.validation==="always"||r.value)&&o()});const w=()=>{},M=()=>{},$=()=>{d.value=!0,u("focus")},q=()=>{e.validation==="blur"&&o(),d.value=!1,u("blur")},o=()=>{let t="";l.value===""&&e.required&&(t=`${e.label?`${e.label}を`:`${e.placeholder}を`}入力してください。`),!t&&e.maxlength&&l.value.length>Number.parseInt(String(e.maxlength))&&(t=`${e.maxlength}文字以内で入力してください。現在${l.value.length}文字です。`),!t&&l.value!==""&&l.value.match(x)&&(t="空白のみの入力はできません。"),!t&&e.pattern&&!new RegExp(e.pattern).test(l.value)&&(t=e.patternMismatchMessage),l.value===""&&!e.required&&(t=""),t?(i.value="invalid",u("invalid",t),r.value=t):(i.value="valid",u("valid"),r.value="")};return E(async()=>{await I(),l.value&&o()}),(t,n)=>{const k=N("focus");return f(),g("div",{class:z(["input",B.value])},[C(y("input",R({id:v,ref_key:"fieldEl",ref:S,"onUpdate:modelValue":n[0]||(n[0]=c=>l.value=c),class:"input-field"},{type:a.type,name:a.name,placeholder:a.placeholder,required:a.required,readonly:a.readonly,disabled:a.disabled,autocomplete:a.autocomplete,pattern:a.pattern,maxlength:a.maxlength},{autocomplete:a.autocomplete?"on":"off",maxlength:a.limitlength,onInput:w,onKeydown:M,onFocus:$,onBlur:q,onMouseover:n[1]||(n[1]=c=>m.value=!0),onMouseleave:n[2]||(n[2]=c=>m.value=!1)}),null,16,H),[[F,l.value],[k,a.focus]]),a.label?(f(),K(j,{key:0,tag:"label",for:v,class:"input-label"},{default:L(()=>[y("span",O,T(a.label),1),a.required?(f(),g("span",P,"*")):b("",!0)]),_:1})):b("",!0)],2)}}});export{U as _};
