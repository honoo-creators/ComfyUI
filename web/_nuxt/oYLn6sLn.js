import{a4 as B,ad as _,o as i,a6 as n,a7 as x,a8 as T,aj as g,k as j,at as S,av as A,l as o,p as D,ai as E,aE as G,a5 as l,w as O,an as P,ao as V,al as U,g as z,f as F,as as I,a9 as J,aS as w,s as R,ab as M,ag as W,ah as Y,y as q,z as H,aY as K,B as Q,aI as X,b0 as Z,j as ee,aU as L,ac as $,c as N,ba as te}from"./UAXgUK1c.js";import{_ as ae}from"./CdEywCpt.js";import{_ as oe}from"./RNISC01w.js";const se={};function ne(d,r){const m=ae;return i(),_(m,{per:240/530*100,class:"lookStyleRatio"},{default:n(()=>[x(d.$slots,"default")]),_:3})}const re=B(se,[["render",ne]]),ce={class:"lookStyle-image"},le={class:"lookStyle-name"},v=T({__name:"LookStyle",props:{data:{type:Object,default:()=>({})},current:{type:Boolean,default:!1}},setup(d){const r=d,m=g(()=>r.data.name),u=g(()=>r.data.id),p=g(()=>r.data.thumbnail_path);return(k,C)=>{const h=D,e=O;return i(),j("div",{class:U(["lookStyle",{_current:d.current}])},[S("div",ce,[o(p)?(i(),_(h,E({key:0},{src:o(p)},{cover:""}),null,16)):o(u)?(i(),_(oe,G(E({key:1},{id:o(u)})),null,16)):A("",!0)]),S("div",le,[l(re,null,{default:n(()=>[l(e,{"font-size":"28",extrabold:"",center:"",unselectable:"",color:"light"},{default:n(()=>[P(V(o(m)),1)]),_:1})]),_:1})])],2)}}}),de=T({__name:"lookstyle",setup(d){const r={id:-1,name:"Custom Load",thumbnail_path:"https://cdn.pixabay.com/photo/2023/02/27/15/15/abstract-7818693_1280.jpg"},m=te(),u=z(),{lookStyle:p}=F(u),k=I([]),C=e=>{const c=k.value.find(a=>a.id===e);c&&(u.setLookStyle(c),$().replace(N().GENERATE_UPLOAD))},h=async()=>{const e=await m.select(["json"]);if(!e)return;const c=e.blob,a=async s=>new Promise((f,y)=>{const t=new FileReader;t.onload=()=>f(t.result),t.onerror=()=>y(new Error("ファイルの読み込みに失敗しました")),t.readAsText(s)});try{const f=await(await fetch(c)).blob(),y=await a(f),t={...r,name:e.name.replace(".json","")};u.setLookStyle(t),u.setCustomWorkflow(JSON.parse(y)),$().push(N().GENERATE_UPLOAD)}catch(s){console.error("JSONの変換に失敗しました:",s)}};return J(async()=>{var e,c;if(!w().active)return R("利用プランが選択されていません。");try{const a=await M().template.lookStyle(((e=w().active)==null?void 0:e.id)??0);(c=a.list)!=null&&c.length&&(k.value=a.list.map(s=>({...s,thumbnail_path:""})))}catch(a){if(a instanceof W)Y().error(a);else return R("ルックスタイルの取得に失敗しました。")}}),(e,c)=>{const a=H,s=ee,f=Q,y=q;return i(),_(y,{class:"pageGenerateLookstyle",gap:"28"},{default:n(()=>[l(a,null,{default:n(()=>[l(K,{icon:"colorSwatch",title:"ルックスタイルを選択してください",body:"プロジェクト専用のスタイルを選び、<br />作品の世界観を引き立てましょう。"})]),_:1}),l(a,{wide:""},{default:n(()=>[l(f,{justify:"center",gap:"8",split:"2"},{default:n(()=>[(i(!0),j(X,null,Z(o(k),t=>(i(),_(s,{key:t.id,class:"pageGenerateLookstyle-item",onClick:b=>C(t.id)},{default:n(()=>{var b;return[l(v,{data:t,current:t.id===((b=o(p))==null?void 0:b.id)},null,8,["data","current"])]}),_:2},1032,["onClick"]))),128)),("useRuntimeConfig"in e?e.useRuntimeConfig:o(L))().public.DEV_ENABLED&&("useRuntimeConfig"in e?e.useRuntimeConfig:o(L))().public.ENVIRONMENT==="local"?(i(),_(s,{key:0,class:"pageGenerateLookstyle-item",onClick:h},{default:n(()=>{var t;return[l(v,{data:r,current:r.id===((t=o(p))==null?void 0:t.id)},null,8,["current"])]}),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})}}});export{de as default};
