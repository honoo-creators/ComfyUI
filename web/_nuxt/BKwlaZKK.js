import{d as j,c as $,o as p,a as C,w as l,b as H,e as E,m as T,v as de,r as se,f as V,n as Y,u as me,_ as L,g as N,h,i as D,j as M,k as t,l as O,p as J,q as ne,s as fe,t as pe,x as q,y as oe,z as U,A as F,B as G,F as R,C as ue,D as ye,E as W,G as ve,H as ge,I as _e,J as he,K as be,L as ke,M as we,N as Q,O as Se,P as I,Q as X,R as $e,S as Ce,T as P,U as Be,V as xe,W as Ie,X as Z}from"./BPCdDENw.js";import{_ as De}from"./CUv7f_QU.js";import{u as ee}from"./Bz3cxUWS.js";const ze=["id"],Ne=["for"],K=j({__name:"Switch",props:{name:{type:String,default:"switch",required:!0},modelValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:S}){const d=o,y=S,r=$(()=>({_checked:f.value,_disabled:d.disabled,_readonly:d.readonly})),a=$(()=>`switch-${d.name}`),f=$({get:()=>d.modelValue,set:v=>{y("update:modelValue",v)}}),c=$(()=>!!me().default);return(v,b)=>{const B=L,u=N;return p(),C(u,{class:Y(["switch",r.value]),gap:"8",align:"start"},{default:l(()=>[H(E("input",T({id:a.value,"onUpdate:modelValue":b[0]||(b[0]=s=>f.value=s),type:"checkbox",class:"switch-input"},{disabled:o.disabled,readonly:o.readonly,name:o.name}),null,16,ze),[[de,f.value]]),E("label",{for:a.value,class:"switch-handle"},null,8,Ne),c.value?(p(),C(B,{key:0,tag:"label",for:a.value,class:"switch-label",caption2:""},{default:l(()=>[se(v.$slots,"default")]),_:3},8,["for"])):V("",!0)]),_:3},8,["class"])}}}),ae="click",te="disabled-click",le="loading-click",Le=j({__name:"IconButton",props:{primary:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},tertiary:{type:Boolean,default:!1},quaternary:{type:Boolean,default:!1},info:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},link:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},large:{type:Boolean,default:!1},medium:{type:Boolean,default:!1},small:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1},icon:{type:String,default:""},scale:{type:[String,Number],default:1},x:{type:[String,Number],default:0},y:{type:[String,Number],default:0},w:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},to:{type:[String,Object],default:""},loading:{type:Boolean,default:!1}},emits:[ae,te,le],setup(o,{emit:S}){const{isPureNumber:d}=fe(),{getSize:y}=pe(),{darkmode:r}=q(),a=o,f=S,c=h(""),v=h("");D([()=>a.primary,()=>a.secondary,()=>a.tertiary,()=>a.quaternary,()=>a.info,()=>a.dark,()=>a.link,()=>a.minimal],([e,n,m,k,g,_,x,w])=>{e&&(c.value="primary"),n&&(c.value="secondary"),m&&(c.value="tertiary"),k&&(c.value="quaternary"),g&&(c.value="info"),_&&(c.value="dark"),x&&(c.value="link"),w&&(c.value="minimal"),c.value||(c.value="primary")},{immediate:!0}),D([()=>a.large,()=>a.medium,()=>a.small,()=>a.xsmall],([e,n,m,k],[])=>{e&&(v.value="large"),n&&(v.value="medium"),m&&(v.value="small"),k&&(v.value="xsmall"),v.value||(v.value="medium")},{immediate:!0});const b=$(()=>({[`_${v.value}`]:!0,[`_${c.value}`]:!0})),B=$(()=>{let e="",n="";return d(String(a.w))?e=y(Number(a.w)):e=String(a.w),n=e,{width:e,height:n}}),u=$(()=>{let e="";switch(c.value){case"primary":e="light";break;case"secondary":e=r.value?"dark":"light";break;case"minimal":e=r.value?"light60":"dark60";break;case"dark":e="light";break;case"info":e="gradationHorizontal";break;default:e=r.value?"light":"dark";break}return e}),s=$(()=>{let e=10;return a.large?e=16:a.medium?e=12:a.small?e=10:a.xsmall&&(e=8),e}),i=$(()=>{const e=[`scale(${a.scale})`];return a.x!=0&&(d(a.x)?e.push(`translateX(${y(Number(a.x))})`):e.push(`translateX(${String(a.x)})`)),a.y!=0&&(d(a.x)?e.push(`translateY(${y(Number(a.y))})`):e.push(`translateY(${String(a.y)})`)),{transform:e.join(" ")}});return(e,n)=>(p(),M("div",{class:Y(["iconButton",b.value]),style:J(B.value)},[t(ne,T({class:"iconButton-inner"},{primary:o.primary,secondary:o.secondary,tertiary:o.tertiary,quaternary:o.quaternary,info:o.info,link:o.link,dark:o.dark,minimal:o.minimal,disabled:o.disabled,loading:o.loading,to:o.to},{rounded:"",onClick:n[0]||(n[0]=m=>f(ae)),onDisabledClick:n[1]||(n[1]=m=>f(te)),onLoadingClick:n[2]||(n[2]=m=>f(le))}),{default:l(()=>[t(O,{class:"iconButton-inner-icon",name:o.icon,color:u.value,size:s.value,style:J(i.value)},null,8,["name","color","size","style"])]),_:1},16)],6))}}),Me={class:"devMenu"},ie=j({__name:"DevMenu",props:{name:{type:String,default:""},open:{type:Boolean,default:!1},children:{type:Array,default:()=>[]}},setup(o){const S=o,d=h(S.open),y=h(0),r=$(()=>S.children.length>0),a=()=>{r.value&&(d.value=!d.value)},f=c=>"children"in c;return(c,v)=>{const b=ie,B=oe("resize");return p(),M("div",Me,[t(N,{class:"devMenu-header",justify:"between",align:"center",gap:"8",onClick:a},{default:l(()=>[t(L,{class:"devMenu-header-txt",body:"",bold:"",lineclamp:"1"},{default:l(()=>[U(F(o.name),1)]),_:1}),r.value?(p(),C(O,{key:0,class:"devMenu-header-icon",name:d.value?"arrowUp":"arrowDown",size:"10"},null,8,["name"])):V("",!0)]),_:1}),t(G,{h:y.value},{default:l(()=>[t(De,null,{default:l(()=>[r.value?H((p(),C(G,{key:0,class:"devMenu-children"},{default:l(()=>[(p(!0),M(R,null,ue(o.children,(u,s)=>(p(),M(R,{key:`devMenu-children-item-${s}`},[f(u)?(p(),C(b,T({key:0,ref_for:!0},u),null,16)):(p(),C(ye,{key:1,class:"devMenu-children-item","active-class":"_current",to:{name:u.page}},{default:l(()=>[t(L,{caption1:"",bold:"",lineclamp:"1"},{default:l(()=>[U(F(u.name),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))]),_:1})),[[W,d.value],[B,u=>y.value=u.height]]):V("",!0)]),_:1})]),_:1},8,["h"])])}}}),qe={class:"devHeader-menus"},Ee={class:"devHeader-menus-inner-list"},Ue=j({__name:"DevHeader",props:{close:{type:Boolean,default:!1}},emits:["close","darkmode","sizeAuto"],setup(o,{emit:S}){const d=ve(),y=S,r=h(!1),a=h(q().darkmode.value),f=h(q().sizeType.value==="auto"),c=h(""),v=ge().getRoutes(),b=h([]),B=()=>{const u=v,s={name:"Dev",children:[],open:!1};u.forEach(i=>{const e=i.path.split("/").slice(1);let n=s;e.forEach((m,k)=>{if(k===e.length-1)n.children.push({name:m.charAt(0).toUpperCase()+m.slice(1).replace(/-/g," "),page:i.name});else{let g=n.children.find(_=>"children"in _&&_.name.toLowerCase()===m);g||(g={name:m.charAt(0).toUpperCase()+m.slice(1),children:[],open:!1},n.children.push(g)),n=g}})}),b.value=s.children.filter(i=>"children"in i&&"open"in i&&!("page"in i))};return _e(()=>{const u=d.name;for(const s of b.value)for(const i of s.children)i.page===u&&(s.open=!0,c.value=i.name)}),D(()=>d.path,u=>{r.value=!1},{immediate:!0}),D(()=>a.value,u=>{q().setDarkmode(u),y("darkmode",u)}),D(()=>f.value,u=>{u?q().setSizeType("auto"):q().setSizeType("px"),y("sizeAuto",u)}),he(()=>{B()}),(u,s)=>{const i=O;return p(),C(N,{class:"devHeader",justify:"center",align:"center"},{default:l(()=>[t(N,{class:"devHeader-title",gap:"8",justify:"center",align:"center",onClick:s[0]||(s[0]=e=>r.value=!r.value)},{default:l(()=>[t(L,{body:"",bold:""},{default:l(()=>[U(F(c.value)+" ",1),t(i,{name:"arrowDown",size:"10"})]),_:1})]),_:1}),o.close?(p(),C(Le,{key:0,class:"devHeader-close",link:"",xsmall:"",icon:"cross",onClick:s[1]||(s[1]=e=>y("close"))})):V("",!0),t(be,null,{default:l(()=>[H(t(ke,{class:"devHeader-overlay",soft:"",onClick:s[2]||(s[2]=e=>r.value=!1)},null,512),[[W,r.value]])]),_:1}),t(we,{y:"-20"},{default:l(()=>[H(E("div",qe,[t(Q,{class:"devHeader-menus-inner"},{default:l(()=>[E("div",Ee,[(p(!0),M(R,null,ue(b.value,(e,n)=>(p(),C(ie,T({key:`global-${n}`,class:"devHeader-menus-inner-list-item",ref_for:!0},e),null,16))),128))]),t(Q,{class:"devHeader-menus-inner-mode",gap:"8"},{default:l(()=>[se(u.$slots,"footer"),t(N,{justify:"between",align:"center",nowrap:""},{default:l(()=>[t(L,{body:"",bold:""},{default:l(()=>s[5]||(s[5]=[U(" Darkmode ")])),_:1}),E("div",null,[t(K,{modelValue:a.value,"onUpdate:modelValue":s[3]||(s[3]=e=>a.value=e),name:"devDarkmode"},null,8,["modelValue"])])]),_:1}),t(N,{justify:"between",align:"center",nowrap:""},{default:l(()=>[t(L,{body:"",bold:""},{default:l(()=>s[6]||(s[6]=[U(" SizeType Auto ")])),_:1}),E("div",null,[t(K,{modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=e=>f.value=e),name:"devSizetype"},null,8,["modelValue"])])]),_:1})]),_:3})]),_:3})],512),[[W,r.value]])]),_:3})]),_:3})}}}),Ve={class:"pageDev"},Re=j({__name:"dev",setup(o){const S=Se(),d=Ie(),y=h(0),r=h(!1),a=h(!1),f=h(0),c=h(!0),v=()=>{$e().push(Ce().DASHBOARD)},b=()=>{var i,e,n,m,k,g,_,x,w,z;(i=document.querySelector("body > .comfyui-body-top"))==null||i.classList.toggle("_show"),(e=document.querySelector("body > .comfyui-body-right"))==null||e.classList.toggle("_show"),(n=document.querySelector("body > .comfyui-body-bottom"))==null||n.classList.toggle("_show"),(m=document.querySelector("body > .comfyui-body-left"))==null||m.classList.toggle("_show"),(k=document.querySelector("body > .comfy-menu"))==null||k.classList.toggle("_show"),(g=document.querySelector("body > .graph-canvas-container"))==null||g.classList.toggle("_show"),(_=document.querySelector("body > .pysssss-image-feed"))==null||_.classList.toggle("_show"),(x=document.querySelector("body > .p-toast"))==null||x.classList.toggle("_show"),(w=document.querySelector("body > #vue-app"))==null||w.classList.toggle("_show"),Z().public.COMFYUI_GENERATE_ENABLED||(z=document.querySelector(".queue-button-group"))==null||z.classList.toggle("_disabled"),a.value=!1},B=async()=>{if(!await P().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"<mark>Step 1. Upload Image</mark> 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const i=await ee().select(["image"]),e=await d.upload.image(i.file);if(!await P().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br /><mark>Step 2. Select Workflow.json</mark> 👈",buttonName:"Select Workflow.json"}}))return;const n=await ee().select(["json"]),m=new FileReader;m.readAsText(n.file),m.onload=async k=>{var x;const g=(x=k.target)==null?void 0:x.result,_=JSON.parse(g);_.nodes&&_.nodes.forEach(w=>{w.type==="LoadImage"&&w.widgets_values&&(w.widgets_values=w.widgets_values.map(z=>typeof z=="string"?e.name:z))}),await d.loadGraph(JSON.stringify(_)),c.value=!1}},u=async()=>{f.value=0,await d.queuePrompt()},s=async()=>{f.value=0,await d.postInterrupt()};return D(()=>r.value,i=>{b(),i&&!Z().public.COMFYUI_GENERATE_ENABLED&&P().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),D(()=>y.value,i=>{var e;(e=document.querySelector("body > .comfyui-body-top"))==null||e.style.setProperty("top",`${i}px`)}),D(()=>d.progress.value,i=>{f.value=i}),(i,e)=>{const n=L,m=G,k=K,g=O,_=ne,x=N,w=Ue,z=Be,re=xe,ce=oe("resize");return p(),M("div",Ve,[I(S).path.includes("login")?V("",!0):H((p(),C(w,{key:0,"show-menu":I(a),"onUpdate:showMenu":e[1]||(e[1]=A=>X(a)?a.value=A:null),class:"pageDev-menu",close:"",onClose:v},{left:l(()=>[t(x,{align:"center",gap:"16",nowrap:""},{default:l(()=>[t(k,{modelValue:I(r),"onUpdate:modelValue":e[0]||(e[0]=A=>X(r)?r.value=A:null),name:"showComfyUI"},{default:l(()=>[t(m,{pt:"2"},{default:l(()=>[t(n,{caption3:"",bold:"",unselectable:""},{default:l(()=>e[2]||(e[2]=[U(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),I(r)?(p(),M(R,{key:0},[t(_,{xsmall:"",w:"16",h:"16",disabled:I(c)||I(f)>0,onClick:u},{default:l(()=>[t(g,{name:"play",color:"light"})]),_:1},8,["disabled"]),t(_,{xsmall:"",w:"16",h:"16",disabled:I(f)===0,onClick:s},{default:l(()=>[t(g,{name:"pause",color:"light"})]),_:1},8,["disabled"]),t(_,{xsmall:"",link:"",w:"16",h:"16",onClick:B},{default:l(()=>[t(g,{name:"upload",size:"16"})]),_:1})],64)):V("",!0)]),_:1})]),_:1},8,["show-menu"])),[[ce,A=>y.value=A.height]]),t(re,{class:Y(["pageDev-pages",{_hide:I(r)}]),center:"","top-space":I(y),"bottom-space":"50"},{default:l(()=>[t(z)]),_:1},8,["class","top-space"])])}}});export{Re as default};
