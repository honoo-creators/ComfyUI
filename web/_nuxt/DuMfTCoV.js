import{d as A,z as g,c as v,f as r,g as _,k as S,w as t,m as W,D as C,q as I,_ as M,h as a,G as E,H as K,F as w,i as z,y as T,B as L,a2 as j,E as G,p as q,aE as O,t as P,N as R,K as J,M as Q,V as X,aF as Y,aB as Z}from"./CvNwVGvF.js";import{_ as ee,a as te}from"./CibpRV3_.js";const ae={class:"inputTag-label-inner"},le={key:0,class:"inputTag-label-required"},se=A({__name:"InputTag",props:{name:{type:String,default:"tag",required:!0},modelValue:{type:Array,default:[]},label:{type:String,default:""},placeholder:{type:String,default:"フリーテキストで追加"},max:{type:[Number,String],default:0},description:{type:String,default:""},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},gap:{type:[Number,String],default:8},focus:{type:Boolean,default:!1}},emits:{"update:modelValue":l=>!0,"enter-key-down":()=>!0,valid:()=>!0,invalid:l=>!0,focus:()=>!0,blur:()=>!0},setup(l,{emit:d}){const{darkmode:y}=R(),s=l,n=d,f=g("idle"),u=g(""),p=g(!1),h=g(!1),b=`inputTag-${s.name}`,$=g(""),i=v(()=>({[`_${f.value}`]:!0,_focus:p.value,_has:o.value.length>0})),o=v({get:()=>s.modelValue,set:e=>{n("update:modelValue",e)}}),k=v(()=>{let e=!0;return s.max&&(e=o.value.length<Number.parseInt(String(s.max))),e}),V=v(()=>{var x;const e=s.placeholder.length,c=(x=u.value)==null?void 0:x.length;return{minWidth:`${Math.max(e,c)}em`}}),F=v(()=>{let e=s.placeholder;return s.label&&!p.value&&(e=""),e}),N=()=>{u.value&&!o.value.includes(u.value)&&(o.value.push(u.value),u.value=""),B()},D=e=>{o.value.splice(o.value.indexOf(e),1),B()},H=()=>{p.value=!0,n("focus")},U=()=>{p.value=!1,n("blur"),u.value&&N(),B()},B=()=>{let e="";!o.value.length&&s.required&&(e="入力してください。"),e?(f.value="invalid",n("invalid",e),$.value=e):(f.value="valid",n("valid"),$.value="")};return(e,c)=>(r(),_("div",{class:P(["inputTag",i.value]),onMouseover:c[1]||(c[1]=m=>h.value=!0),onMouseleave:c[2]||(c[2]=m=>h.value=!1)},[l.label?(r(),S(M,{key:0,tag:"label",for:b,class:"inputTag-label"},{default:t(()=>[W("span",ae,C(l.label),1),l.required?(r(),_("span",le,"*")):I("",!0)]),_:1})):I("",!0),a(T,q({class:"inputTag-items"},{gap:l.gap},{justify:"start",align:"stretch"}),{default:t(()=>[(r(!0),_(E,null,K(o.value,(m,x)=>(r(),S(w,{key:`inputTag-items-item-${x}`,class:"inputTag-items-item",pt:"3.2",pb:"4.8",pl:"8",pr:"4",r:"2",color:z(y)?"light":"dark",relative:"","inline-block":""},{default:t(()=>[a(T,{gap:"4",align:"center"},{default:t(()=>[a(M,{body:"",bold:"",lineclamp:"1",color:z(y)?"dark":"light"},{default:t(()=>[L(C(m),1)]),_:2},1032,["color"]),a(j,{minimal:"",xsmall:"",w:"20",h:"20",onClick:ue=>D(m)},{default:t(()=>[a(w,{pt:"2",mr:"-4"},{default:t(()=>[a(G,{name:"cross",size:"10",color:"light"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["color"]))),128)),a(T,{align:"center",style:{width:"auto"}},{default:t(()=>[k.value?(r(),S(ee,q({key:0,id:b,modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=m=>u.value=m),style:V.value,placeholder:F.value,type:"text"},{name:l.name,focus:l.focus},{onKeyup:O(N,["enter"]),onFocus:H,onBlur:U}),null,16,["modelValue","style","placeholder"])):I("",!0)]),_:1})]),_:1},16)],34))}}),ne={class:"promptInput"},ie=A({__name:"PromptInput",props:J({name:{type:String,required:!0},placeholder:{type:String,required:!0},list:{type:Array,default:()=>[]}},{selects:{},selectsModifiers:{}}),emits:["update:selects"],setup(l){const d=Q(l,"selects"),y=s=>{var n;(n=d.value)==null||n.push(s)};return(s,n)=>{const f=se,u=M,p=te,h=X,b=T,$=Y;return r(),_("div",ne,[a(h,{gap:"0"},{default:t(()=>[a(u,{body:"",bold:""},{default:t(()=>[a(f,q({modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=i=>d.value=i),name:"promptA"},{placeholder:l.placeholder},{max:"10",gap:"4",focus:""}),null,16,["modelValue"])]),_:1}),a(p)]),_:1}),a($,{class:"promptInput-tags"},{default:t(()=>[a(b,{gap:"4"},{default:t(()=>[(r(!0),_(E,null,K(l.list,(i,o)=>{var k,V;return r(),S(Z,{key:`promptInput-tags-item-${o}`,class:P(`promptInput-tags-item${(k=d.value)!=null&&k.includes(i)?" _selected":""}`),disabled:(V=d.value)==null?void 0:V.includes(i),onClick:F=>y(i)},{default:t(()=>[a(u,{caption2:"",bold:""},{default:t(()=>[L(C(i),1)]),_:2},1024)]),_:2},1032,["class","disabled","onClick"])}),128))]),_:1})]),_:1})])}}});export{ie as _};
