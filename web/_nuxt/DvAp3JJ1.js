import{d as b,h as j,c as k,G as A,H as I,Y as C,o as l,a as m,w as e,k as t,m as U,Q as o,j as Y,s as q,F,l as w,f as H,aw as y,T as h,g as K,N as Q,Z as V,M as D,am as J,ak as Z,$ as x,av as z}from"./Bb_j92YR.js";import{_ as W}from"./CUmKP5bz.js";import{_ as X}from"./DZg4nQUd.js";import{_ as T}from"./DdtJo4ao.js";import{u as ee}from"./B--IKceQ.js";import"./DmolMG9N.js";const E=3,_=9,le=b({__name:"output",setup(te){const{isQueue:u,queueRemaining:N,output:r,estimatedTime:O}=C(),d=ee(),a=j(0),L=k(()=>`${_-N.value}/${_}`),S=k(()=>{if(!u.value)return"背景美術を生成しました。";const n=Math.floor(a.value/36e5),s=Math.floor(a.value%36e5/6e4),f=Math.floor(a.value%6e4/1e3);let i="";return n>0&&(i+=`${n}時間`),s>0&&(i+=`${s}分`),i+=`${f}秒`,u.value&&a.value<=0?"...":`あと ${i}`}),M=()=>{y(h().GENERATE_LOOKSTYLE)},R=()=>{d.init(),y(h().GENERATE_LOOKSTYLE)},g=async()=>{await z().wait(1e3),a.value-=1e3,a.value>=0?g():a.value=0},B=n=>{Z().open({name:"imagePreview",options:{list:r.value,index:n}})};return A(()=>O.value,n=>{n>0&&a.value<=0&&g(),a.value=n}),I(()=>{C().queuePrompt({json:JSON.stringify(d.workflow),batchCount:_})}),(n,s)=>{const f=x,i=W,G=X,P=K,v=Q,$=V,p=D;return l(),m(p,{class:"pageOutput",gap:"36"},{default:e(()=>[t(T,U({title:o(L),body:o(S)},{spinner:o(u),icon:o(u)?"":"shine"}),null,16,["spinner","icon"]),t(v,{wide:""},{default:e(()=>[t(P,{gap:"2",split:E},{default:e(()=>[(l(),Y(F,null,q(_,c=>t(G,{key:`pageOutput-item-${c}`},{default:e(()=>[o(r)[c-1]?(l(),m(J,{key:0,class:"pageOutput-img",onClick:ae=>B(c-1)},{default:e(()=>[t(f,{src:o(r)[c-1],cover:""},null,8,["src"])]),_:2},1032,["onClick"])):(l(),m(i,{key:1,w:"100%",h:"100%",animation:"",delay:c/E*150},null,8,["delay"]))]),_:2},1024)),64))]),_:1})]),_:1}),o(r).length>0&&!o(u)?(l(),m(p,{key:0,justify:"center",gap:"40"},{default:e(()=>[t(T,{icon:"checkCircleLine",body:"生成画像は以上です"}),t(v,null,{default:e(()=>[t(p,{justify:"stretch",gap:"20"},{default:e(()=>[t($,{onClick:M},{default:e(()=>s[0]||(s[0]=[w(" 設定を変更してやり直す ")])),_:1}),t($,{info:"",onClick:R},{default:e(()=>s[1]||(s[1]=[w(" 新しい背景美術を生成する ")])),_:1})]),_:1})]),_:1})]),_:1})):H("",!0)]),_:1})}}});export{le as default};
