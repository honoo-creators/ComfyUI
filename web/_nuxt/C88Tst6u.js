import{ab as z,ad as T,ag as d,aM as h,b4 as V,c as I,aF as A,aj as k,a as t,u as s,ai as L,w as o,ak as x,aE as M,az as E,H as W,aT as G,o as v,I as O,E as H,D as J,d as Q,aP as Y,b as K,v as X,aD as Z,j as C,b5 as U,k as ee,af as te,l as ae}from"./C6gKZjUI.js";import{_ as oe}from"./DfaBdduX.js";import{_ as se}from"./CLyNJU6O.js";const ne={class:"pageDev"},ue=z({__name:"dev",setup(le){const N=T(),c=ee(),y=d(0),l=d(!1),f=d(!1),r=d(0),D=d(!0),j=()=>{te().push(ae().dashboard())},S=a=>{var e;document.body.classList.toggle("_showComfyui",a),E().public.COMFYUI_GENERATE_ENABLED||(e=document.querySelector(".queue-button-group"))==null||e.classList.toggle("_disabled"),f.value=!1},$=async()=>{if(!await C().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"Step 1. Upload Image 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const a=await U().select(["image"]);if(!a)return;const e=await c.upload.image(a.file);if(!await C().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br />Step 2. Select Workflow.json 👈",buttonName:"Select Workflow.json"}}))return;const _=await U().select(["json"]);if(!_)return;const g=new FileReader;g.readAsText(_.file),g.onload=async b=>{var w;const u=(w=b.target)==null?void 0:w.result,n=JSON.parse(u);n.nodes&&n.nodes.forEach(m=>{m.type==="LoadImage"&&m.widgets_values&&(m.widgets_values=m.widgets_values.filter(i=>typeof i=="string"||typeof i=="number").map(i=>typeof i=="string"?e.name:i))}),await c.loadGraph(JSON.stringify(n)),D.value=!1}},B=async()=>{r.value=0,await c.queuePrompt()},F=async()=>{r.value=0,await c.postInterrupt()},R=async()=>{await c.queueClear()};return h(()=>l.value,a=>{S(a),a&&!E().public.COMFYUI_GENERATE_ENABLED&&C().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),h(()=>y.value,a=>{var e;(e=document.querySelector("body > .comfyui-body-top"))==null||e.style.setProperty("top",`${a}px`)}),h(()=>c.progress.value,a=>{r.value=a}),V(()=>{l.value=!1,S(!1)}),(a,e)=>{const _=J,g=H,b=oe,u=X,n=K,w=O,m=se,i=Z,P=W,q=G("resize");return v(),I("div",ne,[s(N).path.includes("login")?k("",!0):A((v(),L(m,{key:0,"show-menu":s(f),"onUpdate:showMenu":e[1]||(e[1]=p=>x(f)?f.value=p:null),class:"pageDev-menu",close:"",onClose:j},{left:o(()=>[t(w,{align:"center",gap:"16",nowrap:""},{default:o(()=>[t(b,{modelValue:s(l),"onUpdate:modelValue":e[0]||(e[0]=p=>x(l)?l.value=p:null),name:"showComfyUI"},{default:o(()=>[t(g,{pt:"2"},{default:o(()=>[t(_,{caption3:"",bold:"",unselectable:""},{default:o(()=>e[2]||(e[2]=[Q(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),s(l)?(v(),I(Y,{key:0},[t(n,{xsmall:"",w:"16",h:"16",disabled:s(r)>0,onClick:B},{default:o(()=>[t(u,{name:"play",color:"light"})]),_:1},8,["disabled"]),t(n,{xsmall:"",w:"16",h:"16",disabled:s(r)===0,onClick:F},{default:o(()=>[t(u,{name:"pause",color:"light"})]),_:1},8,["disabled"]),t(n,{xsmall:"",link:"",w:"16",h:"16",onClick:$},{default:o(()=>[t(u,{name:"upload",size:"16"})]),_:1}),t(n,{xsmall:"",w:"16",h:"16",disabled:s(r)===0,onClick:R},{default:o(()=>[t(u,{name:"cross",color:"light"})]),_:1},8,["disabled"])],64)):k("",!0)]),_:1})]),_:1},8,["show-menu"])),[[q,p=>y.value=p.height]]),t(P,{class:M(["pageDev-pages",{_hide:s(l)}]),center:"","top-space":s(y),"bottom-space":"50"},{default:o(()=>[t(i)]),_:1},8,["class","top-space"])])}}});export{ue as default};
