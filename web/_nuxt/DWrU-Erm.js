import{d as S,al as x,z as A,o as G,a8 as f,s as h,a as $,ai as j,ah as R,f as p,k as y,w as l,h as r,g as T,H as v,i as _,G as B,aB as k,Z as b,e as w,W as F,y as N,V as P}from"./BFpHv30j.js";import{u as U}from"./Y7XeIKGk.js";import{_ as D}from"./DOis_vKE.js";import{_ as C}from"./By2p4I-4.js";import{u as O}from"./DuSZBVOy.js";import"./DmcjVUJn.js";import"./HcFoHHq8.js";import"./ANxciWS5.js";const K=S({__name:"lookstyle",setup(V){const u={id:-1,name:"Custom Load",thumbnail_path:"https://cdn.pixabay.com/photo/2023/02/27/15/15/abstract-7818693_1280.jpg"},g=O(),i=U(),{lookStyle:d}=x(i),m=A([]),E=s=>{const a=m.value.find(e=>e.id===s);a&&(i.setLookStyle(a),b().push(w().GENERATE_UPLOAD))},L=async()=>{const s=await g.select(["json"]),a=s.blob,e=async n=>new Promise((c,t)=>{const o=new FileReader;o.onload=()=>c(o.result),o.onerror=()=>t(new Error("ファイルの読み込みに失敗しました")),o.readAsText(n)});try{const c=await(await fetch(a)).blob(),t=await e(c),o={...u,name:s.name.replace(".json","")};i.setLookStyle(o),i.setCustomWorkflow(t),b().push(w().GENERATE_UPLOAD)}catch(n){console.error("JSONの変換に失敗しました:",n)}};return G(async()=>{var s,a;if(!f().active)return h("利用プランが選択されていません。");try{const e=await $().template.lookStyle(((s=f().active)==null?void 0:s.id)??0);(a=e.list)!=null&&a.length&&(m.value=e.list.map(n=>({...n,thumbnail_path:"https://cdn.pixabay.com/photo/2024/05/26/15/27/anime-8788959_1280.jpg"})))}catch(e){if(e instanceof j)R().error(e);else return h("背景美術スタイルの取得に失敗しました。")}}),(s,a)=>{const e=F,n=N,c=P;return p(),y(c,{class:"pageGenerateLookstyle",gap:"28"},{default:l(()=>[r(e,null,{default:l(()=>[r(D,{icon:"shapes",title:"背景美術スタイルを選択してください",body:"事前に設定されたルックスタイルがある場合は<br />該当するスタイルを選んでください。"})]),_:1}),r(e,{wide:""},{default:l(()=>[r(n,{justify:"center",gap:"16"},{default:l(()=>[(p(!0),T(B,null,v(_(m),t=>(p(),y(k,{key:t.id,class:"pageGenerateLookstyle-item",onClick:o=>E(t.id)},{default:l(()=>{var o;return[r(C,{data:t,current:t.id===((o=_(d))==null?void 0:o.id)},null,8,["data","current"])]}),_:2},1032,["onClick"]))),128)),r(k,{class:"pageGenerateLookstyle-item",onClick:L},{default:l(()=>{var t;return[r(C,{data:u,current:u.id===((t=_(d))==null?void 0:t.id)},null,8,["current"])]}),_:1})]),_:1})]),_:1})]),_:1})}}});export{K as default};
