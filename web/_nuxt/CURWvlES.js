import{ab as L,p as N,m as A,ag as G,ac as T,au as y,s as C,ae as $,aB as j,aA as B,ai as _,w as n,F as O,o as m,a as r,G as v,ar as D,I as F,c as P,aj as U,aP as V,aO as x,u as i,t as I,az as b,af as h,l as g,b5 as J}from"./Dtv-Y39l.js";import{_ as E}from"./DL_wfQRE.js";import"./Dpx_JGDJ.js";import"./CVFqbrRC.js";const K=L({__name:"lookstyle",setup(M){const p={id:-1,name:"Custom Load",thumbnail_path:"https://cdn.pixabay.com/photo/2023/02/27/15/15/abstract-7818693_1280.jpg"},w=J(),u=N(),{lookStyle:k}=A(u),d=G([]),R=t=>{const s=d.value.find(a=>a.id===t);s&&(u.setLookStyle(s),h().replace(g().GENERATE_UPLOAD))},S=async()=>{const t=await w.select(["json"]);if(!t)return;const s=t.blob,a=async o=>new Promise((l,c)=>{const e=new FileReader;e.onload=()=>l(e.result),e.onerror=()=>c(new Error("ファイルの読み込みに失敗しました")),e.readAsText(o)});try{const l=await(await fetch(s)).blob(),c=await a(l),e={...p,name:t.name.replace(".json","")};u.setLookStyle(e),u.setCustomWorkflow(JSON.parse(c)),h().push(g().GENERATE_UPLOAD)}catch(o){console.error("JSONの変換に失敗しました:",o)}};return T(async()=>{var t,s;if(!y().active)return C("利用プランが選択されていません。");try{const a=await $().template.lookStyle(((t=y().active)==null?void 0:t.id)??0);(s=a.list)!=null&&s.length&&(d.value=a.list.map(o=>({...o,thumbnail_path:""})))}catch(a){if(a instanceof j)B().error(a);else return C("ルックスタイルの取得に失敗しました。")}}),(t,s)=>{const a=v,o=I,l=F,c=O;return m(),_(c,{class:"pageGenerateLookstyle",gap:"28"},{default:n(()=>[r(a,null,{default:n(()=>[r(D,{icon:"colorSwatch",title:"ルックスタイルを選択してください",body:"プロジェクト専用のスタイルを選び、<br />作品の世界観を引き立てましょう。"})]),_:1}),r(a,{wide:""},{default:n(()=>[r(l,{justify:"center",gap:"8",split:"2"},{default:n(()=>[(m(!0),P(V,null,x(i(d),e=>(m(),_(o,{key:e.id,class:"pageGenerateLookstyle-item",onClick:f=>R(e.id)},{default:n(()=>{var f;return[r(E,{data:e,current:e.id===((f=i(k))==null?void 0:f.id)},null,8,["data","current"])]}),_:2},1032,["onClick"]))),128)),("useRuntimeConfig"in t?t.useRuntimeConfig:i(b))().public.DEV_ENABLED&&("useRuntimeConfig"in t?t.useRuntimeConfig:i(b))().public.ENVIRONMENT==="local"?(m(),_(o,{key:0,class:"pageGenerateLookstyle-item",onClick:S},{default:n(()=>{var e;return[r(E,{data:p,current:p.id===((e=i(k))==null?void 0:e.id)},null,8,["current"])]}),_:1})):U("",!0)]),_:1})]),_:1})]),_:1})}}});export{K as default};
