import{_ as o}from"./Z7IVsS_Z.js";import{d as r,r as c,c as i,o as u,n as p,u as d,a as _,b as l,e as f,f as m,s as g,C as h,g as k,h as C,i as b,j as v,k as w}from"./QWLheGxm.js";const z={class:"pageCallback"},y=r({__name:"callback",setup(A){const t=c(!1),n=i(()=>w().design.page.spinner.size);return u(async()=>{if(t.value)return;t.value=!0,await p();const{sns_id:e,access_token:a}=d().query;if(e&&a)try{const{token:s}=await _().register.processGoogleAuth({snsId:e,token:a});await l().login(s),f(m().dashboard())}catch{return g({statusCode:Number(h.BadRequest),statusMessage:"ログインに失敗しました。"})}}),(e,a)=>{const s=o;return k(),C("div",z,[b(s,{size:v(n)},null,8,["size"])])}}});export{y as default};
