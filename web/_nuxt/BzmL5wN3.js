import{aa as A,ac as L,af as p,aL as b,b2 as P,aR as V,o as v,c as I,u as s,aE as G,ai as O,w as t,a,ah as k,d as T,aO as W,aj as x,aG as M,ae as H,l as J,az as E,j as C,b3 as U,D as Q,E as Y,v as K,b as X,I as Z,aA as ee,H as ae,k as oe}from"./CJQxQ-sn.js";import{_ as te}from"./DXEYNM_Z.js";import{_ as se}from"./BqarcJIa.js";const ne={class:"pageDev"},re=A({__name:"dev",setup(le){const N=L(),c=oe(),w=p(0),l=p(!1),d=p(!1),i=p(0),D=p(!0),j=()=>{H().push(J().dashboard())},S=o=>{var e;document.body.classList.toggle("_showComfyui",o),E().public.COMFYUI_GENERATE_ENABLED||(e=document.querySelector(".queue-button-group"))==null||e.classList.toggle("_disabled"),d.value=!1},R=async()=>{if(!await C().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"Step 1. Upload Image 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const o=await U().select(["image"]),e=await c.upload.image(o.file);if(!await C().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br />Step 2. Select Workflow.json 👈",buttonName:"Select Workflow.json"}}))return;const h=await U().select(["json"]),_=new FileReader;_.readAsText(h.file),_.onload=async y=>{var f;const u=(f=y.target)==null?void 0:f.result,n=JSON.parse(u);n.nodes&&n.nodes.forEach(r=>{r.type==="LoadImage"&&r.widgets_values&&(r.widgets_values=r.widgets_values.map(g=>typeof g=="string"?e.name:g))}),await c.loadGraph(JSON.stringify(n)),D.value=!1}},$=async()=>{i.value=0,await c.queuePrompt()},B=async()=>{i.value=0,await c.postInterrupt()},F=async()=>{await c.queueClear()};return b(()=>l.value,o=>{S(o),o&&!E().public.COMFYUI_GENERATE_ENABLED&&C().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),b(()=>w.value,o=>{var e;(e=document.querySelector("body > .comfyui-body-top"))==null||e.style.setProperty("top",`${o}px`)}),b(()=>c.progress.value,o=>{i.value=o}),P(()=>{l.value=!1,S(!1)}),(o,e)=>{const h=Q,_=Y,y=te,u=K,n=X,f=Z,r=se,g=ee,q=ae,z=V("resize");return v(),I("div",ne,[s(N).path.includes("login")?x("",!0):G((v(),O(r,{key:0,"show-menu":s(d),"onUpdate:showMenu":e[1]||(e[1]=m=>k(d)?d.value=m:null),class:"pageDev-menu",close:"",onClose:j},{left:t(()=>[a(f,{align:"center",gap:"16",nowrap:""},{default:t(()=>[a(y,{modelValue:s(l),"onUpdate:modelValue":e[0]||(e[0]=m=>k(l)?l.value=m:null),name:"showComfyUI"},{default:t(()=>[a(_,{pt:"2"},{default:t(()=>[a(h,{caption3:"",bold:"",unselectable:""},{default:t(()=>e[2]||(e[2]=[T(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),s(l)?(v(),I(W,{key:0},[a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)>0,onClick:$},{default:t(()=>[a(u,{name:"play",color:"light"})]),_:1},8,["disabled"]),a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)===0,onClick:B},{default:t(()=>[a(u,{name:"pause",color:"light"})]),_:1},8,["disabled"]),a(n,{xsmall:"",link:"",w:"16",h:"16",onClick:R},{default:t(()=>[a(u,{name:"upload",size:"16"})]),_:1}),a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)===0,onClick:F},{default:t(()=>[a(u,{name:"cross",color:"light"})]),_:1},8,["disabled"])],64)):x("",!0)]),_:1})]),_:1},8,["show-menu"])),[[z,m=>w.value=m.height]]),a(q,{class:M(["pageDev-pages",{_hide:s(l)}]),center:"","top-space":s(w),"bottom-space":"50"},{default:t(()=>[a(g)]),_:1},8,["class","top-space"])])}}});export{re as default};
