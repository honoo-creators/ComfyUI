import{d as L,h as A,f as d,i as y,w as a,j as H,k as U,m as Y,v as re,r as O,l as B,p as te,q as ie,_ as M,t as x,x as h,y as se,g as z,z as e,A as I,B as W,D as P,E as G,F as q,G as ne,H as de,I as J,J as K,K as ce,L as me,M as R,N as pe,O as fe,P as V,o as _e,Q as ve,R as ge,S as he,T as ye,U as X,V as we,W as be,u as ke,X as $e,Y as b,Z,e as Se,c as Ce,$ as ee,a0 as F,a1 as ae,a2 as Me,a3 as De,a4 as Ue,a5 as xe}from"./Dgu-BcZp.js";import{_ as ze}from"./_-VJ-hcN.js";const Ie=["id"],Ve=["for"],Q=L({__name:"Switch",props:{name:{type:String,default:"switch",required:!0},modelValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(p,{emit:k}){const o=p,c=k,l=A(()=>({_checked:r.value,_disabled:o.disabled,_readonly:o.readonly})),m=A(()=>`switch-${o.name}`),r=A({get:()=>o.modelValue,set:$=>{c("update:modelValue",$)}}),w=A(()=>!!ie().default);return($,_)=>{const C=M,s=x;return d(),y(s,{class:te(["switch",l.value]),gap:"8",align:"start"},{default:a(()=>[H(U("input",Y({id:m.value,"onUpdate:modelValue":_[0]||(_[0]=t=>r.value=t),type:"checkbox",class:"switch-input"},{disabled:p.disabled,readonly:p.readonly,name:p.name}),null,16,Ie),[[re,r.value]]),U("label",{for:m.value,class:"switch-handle"},null,8,Ve),w.value?(d(),y(C,{key:0,tag:"label",for:m.value,class:"switch-label",caption2:""},{default:a(()=>[O($.$slots,"default")]),_:3},8,["for"])):B("",!0)]),_:3},8,["class"])}}}),Be={class:"devMenu"},oe=L({__name:"DevMenu",props:{name:{type:String,default:""},open:{type:Boolean,default:!1},children:{type:Array,default:()=>[]}},setup(p){const k=p,o=h(k.open),c=h(0),l=A(()=>k.children.length>0),m=()=>{l.value&&(o.value=!o.value)},r=w=>"children"in w;return(w,$)=>{const _=oe,C=se("resize");return d(),z("div",Be,[e(x,{class:"devMenu-header",justify:"between",align:"center",gap:"8",onClick:m},{default:a(()=>[e(M,{class:"devMenu-header-txt",body:"",bold:"",lineclamp:"1"},{default:a(()=>[I(W(p.name),1)]),_:1}),l.value?(d(),y(P,{key:0,class:"devMenu-header-icon",name:o.value?"arrowUp":"arrowDown",size:"10"},null,8,["name"])):B("",!0)]),_:1}),e(G,{h:c.value},{default:a(()=>[e(ze,null,{default:a(()=>[l.value?H((d(),y(G,{key:0,class:"devMenu-children"},{default:a(()=>[(d(!0),z(q,null,ne(p.children,(s,t)=>(d(),z(q,{key:`devMenu-children-item-${t}`},[r(s)?(d(),y(_,Y({key:0,ref_for:!0},s),null,16)):(d(),y(de,{key:1,class:"devMenu-children-item","active-class":"_current",to:{name:s.page}},{default:a(()=>[e(M,{caption1:"",bold:"",lineclamp:"1"},{default:a(()=>[I(W(s.name),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))]),_:1})),[[J,o.value],[C,s=>c.value=s.height]]):B("",!0)]),_:1})]),_:1},8,["h"])])}}}),Ee={class:"devHeader-menus"},Ne={class:"devHeader-menus-inner-list"},Re=L({__name:"DevHeader",props:K({close:{type:Boolean,default:!1}},{showMenu:{type:Boolean,required:!1},showMenuModifiers:{}}),emits:K(["close","darkmode","sizeAuto"],["update:showMenu"]),setup(p,{emit:k}){const o=ce(),c=me(p,"showMenu"),l=k,m=h(R().darkmode.value),r=h(R().sizeType.value==="auto"),w=h(""),$=pe().getRoutes(),_=h([]),C=()=>{const s=$,t=be().path.value,i={name:"Dev",children:[],open:!1};s.forEach(n=>{if(!n.path.startsWith(t))return;const u=n.path.replace(t,"").split("/").filter(f=>f.length>0);let S=i;u.forEach((f,E)=>{if(E===u.length-1)S.children.push({name:f.charAt(0).toUpperCase()+f.slice(1).replace(/-/g," "),page:n.name});else{let v=S.children.find(g=>"children"in g&&g.name.toLowerCase()===f);v||(v={name:f.charAt(0).toUpperCase()+f.slice(1),children:[],open:!1},S.children.push(v)),S=v}})}),_.value=i.children.filter(n=>"children"in n&&"open"in n&&!("page"in n))};return fe(()=>{const s=o.name;for(const t of _.value)for(const i of t.children)i.page===s&&(t.open=!0,w.value=i.name)}),V(()=>o.path,s=>{c.value=!1},{immediate:!0}),V(()=>m.value,s=>{R().setDarkmode(s),l("darkmode",s)}),V(()=>r.value,s=>{s?R().setSizeType("auto"):R().setSizeType("px"),l("sizeAuto",s)}),_e(()=>{C()}),(s,t)=>(d(),y(we,{class:"devHeader",full:"","no-padding":""},{default:a(()=>[e(ve,null,{left:a(()=>[O(s.$slots,"left")]),center:a(()=>[e(M,{body:"",bold:""},{default:a(()=>[e(x,{class:"devHeader-title",gap:"8",justify:"center",align:"center",onClick:t[0]||(t[0]=i=>c.value=!c.value)},{default:a(()=>[I(W(w.value)+" ",1),e(P,{name:"arrowDown",size:"10"})]),_:1})]),_:1})]),right:a(()=>[p.close?(d(),y(P,{key:0,name:"cross",size:"20",onClick:t[1]||(t[1]=i=>l("close"))})):B("",!0)]),_:3}),e(ge,null,{default:a(()=>[H(e(he,{class:"devHeader-overlay",soft:"",onClick:t[2]||(t[2]=i=>c.value=!1)},null,512),[[J,c.value]])]),_:1}),e(ye,{y:"-20"},{default:a(()=>[H(U("div",Ee,[e(X,{class:"devHeader-menus-inner"},{default:a(()=>[U("div",Ne,[(d(!0),z(q,null,ne(_.value,(i,n)=>(d(),y(oe,Y({key:`global-${n}`,class:"devHeader-menus-inner-list-item",ref_for:!0},i),null,16))),128))]),e(X,{class:"devHeader-menus-inner-mode",gap:"8"},{default:a(()=>[O(s.$slots,"footer"),e(x,{justify:"between",align:"center",nowrap:""},{default:a(()=>[e(M,{body:"",bold:""},{default:a(()=>t[5]||(t[5]=[I(" Darkmode ")])),_:1}),U("div",null,[e(Q,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=i=>m.value=i),name:"devDarkmode"},null,8,["modelValue"])])]),_:1}),e(x,{justify:"between",align:"center",nowrap:""},{default:a(()=>[e(M,{body:"",bold:""},{default:a(()=>t[6]||(t[6]=[I(" SizeType Auto ")])),_:1}),U("div",null,[e(Q,{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=i=>r.value=i),name:"devSizetype"},null,8,["modelValue"])])]),_:1})]),_:3})]),_:3})],512),[[J,c.value]])]),_:3})]),_:3}))}}),Ae={class:"pageDev"},Te=L({__name:"dev",setup(p){const k=ke(),o=xe(),c=h(0),l=h(!1),m=h(!1),r=h(0),w=h(!0),$=()=>{Se().push(Ce().dashboard())},_=n=>{var u;document.body.classList.toggle("_showComfyui",n),ee().public.COMFYUI_GENERATE_ENABLED||(u=document.querySelector(".queue-button-group"))==null||u.classList.toggle("_disabled"),m.value=!1},C=async()=>{if(!await F().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"<mark>Step 1. Upload Image</mark> 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const n=await ae().select(["image"]),u=await o.upload.image(n.file);if(!await F().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br /><mark>Step 2. Select Workflow.json</mark> 👈",buttonName:"Select Workflow.json"}}))return;const S=await ae().select(["json"]),f=new FileReader;f.readAsText(S.file),f.onload=async E=>{var j;const v=(j=E.target)==null?void 0:j.result,g=JSON.parse(v);g.nodes&&g.nodes.forEach(D=>{D.type==="LoadImage"&&D.widgets_values&&(D.widgets_values=D.widgets_values.map(T=>typeof T=="string"?u.name:T))}),await o.loadGraph(JSON.stringify(g)),w.value=!1}},s=async()=>{r.value=0,await o.queuePrompt()},t=async()=>{r.value=0,await o.postInterrupt()},i=async()=>{await o.queueClear()};return V(()=>l.value,n=>{_(n),n&&!ee().public.COMFYUI_GENERATE_ENABLED&&F().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),V(()=>c.value,n=>{var u;(u=document.querySelector("body > .comfyui-body-top"))==null||u.style.setProperty("top",`${n}px`)}),V(()=>o.progress.value,n=>{r.value=n}),$e(()=>{l.value=!1,_(!1)}),(n,u)=>{const S=M,f=G,E=Q,v=P,g=Me,j=x,D=Re,T=De,le=Ue,ue=se("resize");return d(),z("div",Ae,[b(k).path.includes("login")?B("",!0):H((d(),y(D,{key:0,"show-menu":b(m),"onUpdate:showMenu":u[1]||(u[1]=N=>Z(m)?m.value=N:null),class:"pageDev-menu",close:"",onClose:$},{left:a(()=>[e(j,{align:"center",gap:"16",nowrap:""},{default:a(()=>[e(E,{modelValue:b(l),"onUpdate:modelValue":u[0]||(u[0]=N=>Z(l)?l.value=N:null),name:"showComfyUI"},{default:a(()=>[e(f,{pt:"2"},{default:a(()=>[e(S,{caption3:"",bold:"",unselectable:""},{default:a(()=>u[2]||(u[2]=[I(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),b(l)?(d(),z(q,{key:0},[e(g,{xsmall:"",w:"16",h:"16",disabled:b(r)>0,onClick:s},{default:a(()=>[e(v,{name:"play",color:"light"})]),_:1},8,["disabled"]),e(g,{xsmall:"",w:"16",h:"16",disabled:b(r)===0,onClick:t},{default:a(()=>[e(v,{name:"pause",color:"light"})]),_:1},8,["disabled"]),e(g,{xsmall:"",link:"",w:"16",h:"16",onClick:C},{default:a(()=>[e(v,{name:"upload",size:"16"})]),_:1}),e(g,{xsmall:"",w:"16",h:"16",disabled:b(r)===0,onClick:i},{default:a(()=>[e(v,{name:"cross",color:"light"})]),_:1},8,["disabled"])],64)):B("",!0)]),_:1})]),_:1},8,["show-menu"])),[[ue,N=>c.value=N.height]]),e(le,{class:te(["pageDev-pages",{_hide:b(l)}]),center:"","top-space":b(c),"bottom-space":"50"},{default:a(()=>[e(T)]),_:1},8,["class","top-space"])])}}});export{Te as default};
