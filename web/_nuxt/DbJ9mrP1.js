import{d as D,r,k as b,a0 as j,o as Q,U as W,Q as X,g as d,f as B,R as Z,as as ee,G as q,m as x,p as I,w as h,H as te,t as k,z as G,v as H,h as S,l as s,al as K,J as P,Y as ae,K as ne,F as se,q as O,a as U,O as le,e as oe,c as ue,aj as ie,s as re,C as de,D as ce}from"./5NVV-yna.js";import{_ as me}from"./JRZpjEsU.js";import{u as J,_ as pe}from"./CHU3lYNQ.js";const fe=["autocomplete","maxlength"],ve={class:"input-label-inner"},ge={key:0,class:"input-label-required"},z="update:modelValue",ye="enter-key-down",L="valid",A="invalid",F="focus",R="blur",_e=D({__name:"Input",props:{name:{type:String,default:"field",required:!0},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{type:String,default:"",required:!0},autocomplete:{type:Boolean,default:!1},pattern:{type:String},patternMismatchMessage:{type:String,default:"入力形式が正しくありません。"},maxlength:{type:[Number,String]},limitlength:{type:[Number,String]},required:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},noSpin:{type:Boolean,default:!1},validation:{type:String,default:"blur",validator:t=>["always","blur"].includes(t)}},emits:{[z]:t=>!0,[ye]:()=>!0,[L]:()=>!0,[A]:t=>!0,[F]:()=>!0,[R]:()=>!0},setup(t,{emit:p}){const{noOnlySpace:c}=J(),e=t,a=p,i=r("idle"),f=r(null),C=r(e.focus),v=r(!1),m=`input-${e.name}`,n=r(""),E=b(()=>({[`_${i.value}`]:!0,_focus:C.value,_input:u.value.length,_readonly:e.readonly,_noLabel:!e.label,_disabled:e.disabled,_noSpin:e.noSpin})),u=b({get:()=>e.modelValue,set:o=>{a(z,o)}});j(()=>e.modelValue,()=>{(e.validation==="always"||n.value)&&l()});const $=()=>{},y=()=>{},w=()=>{C.value=!0,a(F)},g=()=>{e.validation==="blur"&&l(),C.value=!1,a(R)},l=()=>{let o="";u.value===""&&e.required&&(o=`${e.label?`${e.label}を`:`${e.placeholder}を`}入力してください。`),!o&&e.maxlength&&u.value.length>Number.parseInt(String(e.maxlength))&&(o=`${e.maxlength}文字以内で入力してください。現在${u.value.length}文字です。`),!o&&u.value!==""&&u.value.match(c)&&(o="空白のみの入力はできません。"),!o&&e.pattern&&!new RegExp(e.pattern).test(u.value)&&(o=e.patternMismatchMessage),u.value===""&&!e.required&&(o=""),o?(i.value="invalid",a(A,o),n.value=o):(i.value="valid",a(L),n.value="")};return Q(async()=>{await W(),u.value&&l()}),(o,_)=>{const M=X("focus");return d(),B("div",{class:H(["input",E.value])},[Z(q("input",x({id:m,ref_key:"fieldEl",ref:f,"onUpdate:modelValue":_[0]||(_[0]=V=>u.value=V),class:"input-field"},{type:t.type,name:t.name,placeholder:t.placeholder,required:t.required,readonly:t.readonly,disabled:t.disabled,autocomplete:t.autocomplete,pattern:t.pattern,maxlength:t.maxlength},{autocomplete:t.autocomplete?"on":"off",maxlength:t.limitlength,onInput:$,onKeydown:y,onFocus:w,onBlur:g,onMouseover:_[1]||(_[1]=V=>v.value=!0),onMouseleave:_[2]||(_[2]=V=>v.value=!1)}),null,16,fe),[[ee,u.value],[M,t.focus]]),t.label?(d(),I(G,{key:0,tag:"label",for:m,class:"input-label"},{default:h(()=>[q("span",ve,te(t.label),1),t.required?(d(),B("span",ge,"*")):k("",!0)]),_:1})):k("",!0)],2)}}}),be=()=>({INVITE_CODE_LENGTH:16}),Ie=D({__name:"EnterpriseCodeInput",props:{modelValue:{type:String,default:"",required:!0},status:{type:String,default:"",validator:t=>["","progress","ok","ng"].includes(t)},message:{type:String,default:""}},emits:["update:modelValue","valid","invalid","focus","blur"],setup(t,{emit:p}){const{INVITE_CODE_LENGTH:c}=be(),{upperCaseAlphanumericPattern:e}=J(),a=t,i=p,f=r(""),C=b(()=>({[`_${a.status}`]:!0})),v=b({get:()=>a.modelValue,set:g=>{i("update:modelValue",g)}}),m=b(()=>a.status==="ok"?"招待コードを確認しました。":a.status==="ng"?"":`半角英数字${c}桁で入力してください。`),n=b(()=>a.status==="progress"),E=b(()=>a.status==="progress"||a.status==="ok"),u=b(()=>a.status==="ng"),$=()=>{f.value="",i("valid")},y=()=>{f.value=`半角英数字${c}桁で入力してください。`,i("invalid")},w=g=>{const l=g.target;l.value=l.value.toUpperCase(),v.value=l.value,l.value.length===c?$():y()};return j(()=>a.message,g=>{g&&(f.value=g)}),(g,l)=>{const o=_e,_=pe,M=P,V=ae,T=ne,Y=G;return d(),I(Y,{class:H(["enterpriseCodeInput",s(C)]),title2:""},{default:h(()=>[S(M,{justify:"center"},{default:h(()=>[S(o,x({modelValue:s(v),"onUpdate:modelValue":l[0]||(l[0]=N=>K(v)?v.value=N:null),class:"enterpriseCodeInput-field",name:"email",type:"email",label:"招待コード",placeholder:"",limitlength:s(c),validation:"always",pattern:s(e),required:""},{disabled:s(u),readonly:s(E)},{onValid:$,onInvalid:y,onFocus:l[1]||(l[1]=N=>i("focus")),onBlur:l[2]||(l[2]=N=>i("blur")),onInput:w}),null,16,["modelValue","limitlength","pattern"]),S(_,x({message:s(f),fail:t.status==="ng"},{description:s(m)}),null,16,["message","fail"])]),_:1}),s(n)?(d(),I(V,{key:0,class:"enterpriseCodeInput-icon",size:"16",color:"dark60"})):t.status==="ok"?(d(),I(T,{key:1,class:"enterpriseCodeInput-icon",name:"check",size:"16",color:"success"})):t.status==="ng"?(d(),I(T,{key:2,class:"enterpriseCodeInput-icon",name:"cross",size:"16",color:"danger"})):k("",!0)]),_:1},8,["class"])}}}),Ce={class:"pageJoin"},Se=D({__name:"join",setup(t){const p=r(""),c=r(!1),e=r(""),a=r(""),i=r(!1),f=r(new Date().toISOString()),C=async()=>{c.value=!0,e.value="progress",a.value="";try{await U().member.join.organization(p.value);const{list:m}=await U().user.availableUsersAccount(),n=m[m.length-1];await le().open({name:"message",options:{title:"Join",content:`Organization ID: ${n.organization_id} に加入しました`,icon:"checkCircleLine",buttonName:"ダッシュボードへ"}}),oe().push(ue().dashboard())}catch(m){if(e.value="ng",a.value="無効な招待コードです。",!(m instanceof ie))return re({statusCode:Number(de.UnknownError),statusMessage:"不明なエラーが発生しました。"})}finally{c.value=!1}},v=()=>{p.value="",e.value="",a.value="",i.value=!1,f.value=new Date().toISOString()};return(m,n)=>{const E=ce,u=P,$=se;return d(),B("div",Ce,[S($,{narrow:""},{default:h(()=>[S(u,{class:"pageGenerateConfirm",gap:"28"},{default:h(()=>[S(me,{icon:"code",title:"追加するコードをご入力ください"}),(d(),I(Ie,x({key:s(f),modelValue:s(p),"onUpdate:modelValue":n[0]||(n[0]=y=>K(p)?p.value=y:null)},{status:s(e),message:s(a)},{onValid:n[1]||(n[1]=y=>i.value=!0),onInvalid:n[2]||(n[2]=y=>i.value=!1)}),null,16,["modelValue"])),s(e)!=="ng"?(d(),I(E,{key:0,disabled:!s(i),loading:s(c),onClick:C},{default:h(()=>n[3]||(n[3]=[O(" 送信 ")])),_:1},8,["disabled","loading"])):k("",!0),s(e)==="ng"?(d(),I(E,{key:1,onClick:v},{default:h(()=>n[4]||(n[4]=[O(" クリア ")])),_:1})):k("",!0)]),_:1})]),_:1})])}}});export{Se as default};
