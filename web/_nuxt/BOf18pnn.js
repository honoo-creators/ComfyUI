import{ab as z,ad as T,ag as p,aM as h,b4 as V,c as I,aF as A,aj as k,a,u as s,ai as L,w as t,ak as x,aE as M,az as E,H as W,aT as G,o as v,I as O,E as H,D as J,d as Q,aP as Y,b as K,v as X,aD as Z,j as C,b5 as U,k as ee,af as ae,l as oe}from"./C7kXV4sk.js";import{_ as te}from"./DdnMK09j.js";import{_ as se}from"./Pn-lAGdd.js";const ne={class:"pageDev"},re=z({__name:"dev",setup(le){const N=T(),c=ee(),w=p(0),l=p(!1),d=p(!1),i=p(0),D=p(!0),j=()=>{ae().push(oe().dashboard())},S=o=>{var e;document.body.classList.toggle("_showComfyui",o),E().public.COMFYUI_GENERATE_ENABLED||(e=document.querySelector(".queue-button-group"))==null||e.classList.toggle("_disabled"),d.value=!1},$=async()=>{if(!await C().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"Step 1. Upload Image 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const o=await U().select(["image"]),e=await c.upload.image(o.file);if(!await C().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br />Step 2. Select Workflow.json 👈",buttonName:"Select Workflow.json"}}))return;const y=await U().select(["json"]),_=new FileReader;_.readAsText(y.file),_.onload=async b=>{var f;const u=(f=b.target)==null?void 0:f.result,n=JSON.parse(u);n.nodes&&n.nodes.forEach(r=>{r.type==="LoadImage"&&r.widgets_values&&(r.widgets_values=r.widgets_values.map(g=>typeof g=="string"?e.name:g))}),await c.loadGraph(JSON.stringify(n)),D.value=!1}},B=async()=>{i.value=0,await c.queuePrompt()},F=async()=>{i.value=0,await c.postInterrupt()},R=async()=>{await c.queueClear()};return h(()=>l.value,o=>{S(o),o&&!E().public.COMFYUI_GENERATE_ENABLED&&C().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),h(()=>w.value,o=>{var e;(e=document.querySelector("body > .comfyui-body-top"))==null||e.style.setProperty("top",`${o}px`)}),h(()=>c.progress.value,o=>{i.value=o}),V(()=>{l.value=!1,S(!1)}),(o,e)=>{const y=J,_=H,b=te,u=X,n=K,f=O,r=se,g=Z,P=W,q=G("resize");return v(),I("div",ne,[s(N).path.includes("login")?k("",!0):A((v(),L(r,{key:0,"show-menu":s(d),"onUpdate:showMenu":e[1]||(e[1]=m=>x(d)?d.value=m:null),class:"pageDev-menu",close:"",onClose:j},{left:t(()=>[a(f,{align:"center",gap:"16",nowrap:""},{default:t(()=>[a(b,{modelValue:s(l),"onUpdate:modelValue":e[0]||(e[0]=m=>x(l)?l.value=m:null),name:"showComfyUI"},{default:t(()=>[a(_,{pt:"2"},{default:t(()=>[a(y,{caption3:"",bold:"",unselectable:""},{default:t(()=>e[2]||(e[2]=[Q(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),s(l)?(v(),I(Y,{key:0},[a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)>0,onClick:B},{default:t(()=>[a(u,{name:"play",color:"light"})]),_:1},8,["disabled"]),a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)===0,onClick:F},{default:t(()=>[a(u,{name:"pause",color:"light"})]),_:1},8,["disabled"]),a(n,{xsmall:"",link:"",w:"16",h:"16",onClick:$},{default:t(()=>[a(u,{name:"upload",size:"16"})]),_:1}),a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)===0,onClick:R},{default:t(()=>[a(u,{name:"cross",color:"light"})]),_:1},8,["disabled"])],64)):k("",!0)]),_:1})]),_:1},8,["show-menu"])),[[q,m=>w.value=m.height]]),a(P,{class:M(["pageDev-pages",{_hide:s(l)}]),center:"","top-space":s(w),"bottom-space":"50"},{default:t(()=>[a(g)]),_:1},8,["class","top-space"])])}}});export{re as default};
