import{d as P,aC as C,x as v,h as R,f as i,i as l,w as a,z as n,Y as o,l as d,A as E,ah as y,$ as h,aF as D,e as M,c as A,ai as z,C as V,n as B,V as $,U as K,a2 as U,a as j,a5 as F}from"./Cl2IasrX.js";import{_ as H}from"./BMl_LroG.js";import{_ as W}from"./Cjg_MWye.js";import{_ as X,a as N}from"./CTQ95EPj.js";import"./Ttd4834T.js";import"./J_VNKloV.js";const q=1556,J=3808,Q=[{id:1101,type:"ImpactKSamplerBasicPipe",pos:[-2388.449951171875,568.0198364257812],size:[370,570],flags:{},order:15,mode:0,inputs:[{name:"basic_pipe",type:"BASIC_PIPE",link:2816},{name:"latent_image",type:"LATENT",link:3802},{name:"scheduler_func_opt",type:"SCHEDULER_FUNC",link:null,shape:7}],outputs:[{name:"BASIC_PIPE",type:"BASIC_PIPE",links:[],slot_index:0,shape:3},{name:"LATENT",type:"LATENT",links:[2814],slot_index:1,shape:3},{name:"VAE",type:"VAE",links:null,shape:3}],properties:{"Node name for S&R":"ImpactKSamplerBasicPipe"},widgets_values:[555639338001183,"randomize",40,7,"euler_ancestral","karras",1],color:"#223",bgcolor:"#335",shape:1},{id:904,type:"CR Prompt Text",pos:[-4226.4716796875,737.9478759765625],size:[450,220],flags:{},order:0,mode:0,inputs:[],outputs:[{name:"prompt",type:"STRING",links:[3131],slot_index:0,shape:3},{name:"show_help",type:"STRING",links:null,shape:3}],title:"Positive Prompt",properties:{"Node name for S&R":"CR Prompt Text"},widgets_values:[`(beautiful modern Japanese Anime background art for anime film, cinematic, epic, realistic, sharp details, dramatic lighting:1.3),

(volume light source at top middle of the frame:1.3),

old elementary school building,
a schoolyard,
succor field and goals,
gymnasium,
countryside,
in Japan,
the wooded hill behind the school,
beautiful mountains,
blue sky,
white summer clouds,
sunny day,
around noon,
in summer,`],color:"#232",bgcolor:"#353",shape:1},{id:625,type:"ToBasicPipe",pos:[-2738.45068359375,558.019775390625],size:[320,110],flags:{collapsed:!1},order:14,mode:0,inputs:[{name:"model",type:"MODEL",link:3792},{name:"clip",type:"CLIP",link:3793},{name:"vae",type:"VAE",link:3781},{name:"positive",type:"CONDITIONING",link:3381},{name:"negative",type:"CONDITIONING",link:2545}],outputs:[{name:"basic_pipe",type:"BASIC_PIPE",links:[2816],slot_index:0,shape:3}],properties:{"Node name for S&R":"ToBasicPipe"},widgets_values:[],color:"#223",bgcolor:"#335",shape:1},{id:600,type:"Apply ControlNet Stack",pos:[-3068.45068359375,608.0198974609375],size:[300,70],flags:{collapsed:!1},order:13,mode:0,inputs:[{name:"positive",type:"CONDITIONING",link:3794},{name:"negative",type:"CONDITIONING",link:3773},{name:"cnet_stack",type:"CONTROL_NET_STACK",link:3772,shape:7}],outputs:[{name:"CONDITIONING+",type:"CONDITIONING",links:[3381],slot_index:0,shape:3},{name:"CONDITIONING-",type:"CONDITIONING",links:[2545],slot_index:1,shape:3}],properties:{"Node name for S&R":"Apply ControlNet Stack"},widgets_values:[],color:"#223",bgcolor:"#335",shape:1},{id:639,type:"VAELoader",pos:[-4226.4716796875,597.9478759765625],size:[450,60],flags:{},order:1,mode:0,inputs:[],outputs:[{name:"VAE",type:"VAE",links:[3781,3783],slot_index:0,shape:3}],properties:{"Node name for S&R":"VAELoader"},widgets_values:["SDXL/sdxl_vae.safetensors"],color:"#232",bgcolor:"#353",shape:1},{id:498,type:"VAEDecode",pos:[-1975.650634765625,584.0463256835938],size:[210,50],flags:{collapsed:!1},order:16,mode:0,inputs:[{name:"samples",type:"LATENT",link:2814},{name:"vae",type:"VAE",link:3783}],outputs:[{name:"IMAGE",type:"IMAGE",links:[3784],slot_index:0,shape:3}],properties:{"Node name for S&R":"VAEDecode"},widgets_values:[],color:"#223",bgcolor:"#335",shape:1},{id:344,type:"SaveImage",pos:[-1725.6512451171875,564.0463256835938],size:[910,1160],flags:{},order:17,mode:0,inputs:[{name:"images",type:"IMAGE",link:3784}],outputs:[],properties:{"Node name for S&R":"SaveImage"},widgets_values:["animeBG3/abg3"],color:"#223",bgcolor:"#335",shape:1},{id:1249,type:"LoadImage",pos:[-5624.43701171875,620.7802124023438],size:[430,450],flags:{pinned:!1},order:2,mode:0,inputs:[],outputs:[{name:"IMAGE",type:"IMAGE",links:[3189],slot_index:0,shape:3},{name:"MASK",type:"MASK",links:null,slot_index:1,shape:3}],title:"Image for ControlNet",properties:{"Node name for S&R":"LoadImage_controlnet"},widgets_values:["","image"],color:"#323",bgcolor:"#535",shape:1},{id:907,type:"CR Prompt Text",pos:[-4226.4716796875,1007.9478759765625],size:[450,150],flags:{},order:3,mode:0,inputs:[],outputs:[{name:"prompt",type:"STRING",links:[2399],slot_index:0,shape:3},{name:"show_help",type:"STRING",links:null,shape:3}],title:"Negative Prompt",properties:{"Node name for S&R":"CR Prompt Text"},widgets_values:["fantasy, sci-fi, blurred, (lighting effects:1.3), two key-light sources, depth of field, outlines, sunset, morning light, Chinese culture, black and white, monochrome, "],color:"#232",bgcolor:"#353",shape:1},{id:1250,type:"DF_Image_scale_to_side",pos:[-5154.43701171875,630.7802734375],size:[360,140],flags:{collapsed:!1},order:5,mode:0,inputs:[{name:"image",type:"IMAGE",link:3189}],outputs:[{name:"IMAGE",type:"IMAGE",links:[3787,3808],slot_index:0,shape:3}],properties:{"Node name for S&R":"DF_Image_scale_to_side"},widgets_values:[1216,"Longest","nearest-exact","disabled"],color:"#323",bgcolor:"#535",shape:1},{id:1276,type:"AIO_Preprocessor",pos:[-5110.01611328125,835.6531372070312],size:[320,80],flags:{},order:7,mode:0,inputs:[{name:"image",type:"IMAGE",link:3787}],outputs:[{name:"IMAGE",type:"IMAGE",links:[3786],slot_index:0,shape:3}],properties:{"Node name for S&R":"AIO_Preprocessor"},widgets_values:["TEEDPreprocessor",1216],color:"#323",bgcolor:"#535",shape:1},{id:1271,type:"CR Multi-ControlNet Stack",pos:[-4710.01611328125,605.6531372070312],size:[410,460],flags:{collapsed:!1},order:11,mode:0,inputs:[{name:"image_1",type:"IMAGE",link:3786,shape:7},{name:"image_2",type:"IMAGE",link:null,shape:7},{name:"image_3",type:"IMAGE",link:null,shape:7},{name:"controlnet_stack",type:"CONTROL_NET_STACK",link:null,shape:7}],outputs:[{name:"CONTROLNET_STACK",type:"CONTROL_NET_STACK",links:[3772],slot_index:0,shape:3},{name:"show_help",type:"STRING",links:null,shape:3}],properties:{"Node name for S&R":"CR Multi-ControlNet Stack"},widgets_values:["On","mistoLine_rank256.safetensors",.9500000000000001,0,.9500000000000001,"Off","control-lora-depth-rank256.safetensors",.6,0,.8,"Off","control-lora-depth-rank256.safetensors",.85,0,.966],color:"#323",bgcolor:"#535",shape:1},{id:1556,type:"GetImageSizeAndCount",pos:[-4226.4716796875,1207.9478759765625],size:[280,90],flags:{},order:8,mode:0,inputs:[{name:"image",type:"IMAGE",link:3808}],outputs:[{name:"image",type:"IMAGE",links:null},{name:"1216 width",type:"INT",links:[3805],slot_index:1},{name:"861 height",type:"INT",links:[3806],slot_index:2},{name:"1 count",type:"INT",links:null}],properties:{"Node name for S&R":"GetImageSizeAndCount"}},{id:1552,type:"SDXLEmptyLatentSizePicker+",pos:[-3916.47265625,1217.9478759765625],size:[340,170],flags:{},order:12,mode:0,inputs:[{name:"width_override",type:"INT",link:3805,widget:{name:"width_override"}},{name:"height_override",type:"INT",link:3806,widget:{name:"height_override"}}],outputs:[{name:"LATENT",type:"LATENT",links:[3802],slot_index:0},{name:"width",type:"INT",links:null},{name:"height",type:"INT",links:null}],properties:{"Node name for S&R":"SDXLEmptyLatentSizePicker+"},widgets_values:["1024x1024 (1.0)",1,0,0]},{id:794,type:"CheckpointLoaderSimple",pos:[-4226.4716796875,417.9479675292969],size:[450,100],flags:{},order:4,mode:0,inputs:[],outputs:[{name:"MODEL",type:"MODEL",links:[3792],slot_index:0,shape:3},{name:"CLIP",type:"CLIP",links:[3693],slot_index:1,shape:3},{name:"VAE",type:"VAE",links:[],slot_index:2,shape:3}],properties:{"Node name for S&R":"CheckpointLoaderSimple"},widgets_values:["HONOO-anime-BG_01_.safetensors"],color:"#232",bgcolor:"#353",shape:1},{id:1198,type:"CLIPSetLastLayer",pos:[-3736.47265625,437.9479675292969],size:[220,60],flags:{},order:6,mode:0,inputs:[{name:"clip",type:"CLIP",link:3693}],outputs:[{name:"CLIP",type:"CLIP",links:[3776,3777,3793],slot_index:0,shape:3}],properties:{"Node name for S&R":"CLIPSetLastLayer"},widgets_values:[-1],color:"#232",bgcolor:"#353",shape:1},{id:1224,type:"CLIPTextEncode",pos:[-3396.47265625,617.9478759765625],size:[210,80],flags:{collapsed:!1},order:9,mode:0,inputs:[{name:"clip",type:"CLIP",link:3776},{name:"text",type:"STRING",link:3131,widget:{name:"text"}}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[3794],slot_index:0,shape:3}],properties:{"Node name for S&R":"CLIPTextEncode"},widgets_values:["(Accordion cable:1.4). (mechanical details:1.5), (outlines:1.2),  fog, photorealism, worst quality, (trees, plants, green, grass:1.3), text, watermark, nude"],color:"#232",bgcolor:"#353",shape:1},{id:896,type:"CLIPTextEncode",pos:[-3396.47265625,747.9478759765625],size:[210,70],flags:{collapsed:!1},order:10,mode:0,inputs:[{name:"clip",type:"CLIP",link:3777},{name:"text",type:"STRING",link:2399,widget:{name:"text"}}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[3773],slot_index:0,shape:3}],properties:{"Node name for S&R":"CLIPTextEncode"},widgets_values:["(Accordion cable:1.4). (mechanical details:1.5), (outlines:1.2),  fog, photorealism, worst quality, (trees, plants, green, grass:1.3), text, watermark, nude"],color:"#232",bgcolor:"#353",shape:1}],Y=[[2399,907,0,896,1,"STRING"],[2545,600,1,625,4,"CONDITIONING"],[2814,1101,1,498,0,"LATENT"],[2816,625,0,1101,0,"BASIC_PIPE"],[3131,904,0,1224,1,"STRING"],[3189,1249,0,1250,0,"IMAGE"],[3381,600,0,625,3,"CONDITIONING"],[3693,794,1,1198,0,"CLIP"],[3772,1271,0,600,2,"CONTROL_NET_STACK"],[3773,896,0,600,1,"CONDITIONING"],[3776,1198,0,1224,0,"CLIP"],[3777,1198,0,896,0,"CLIP"],[3781,639,0,625,2,"VAE"],[3783,639,0,498,1,"VAE"],[3784,498,0,344,0,"IMAGE"],[3786,1276,0,1271,0,"IMAGE"],[3787,1250,0,1276,0,"IMAGE"],[3792,794,0,625,0,"MODEL"],[3793,1198,0,625,1,"CLIP"],[3794,1224,0,600,0,"CONDITIONING"],[3802,1552,0,1101,1,"LATENT"],[3805,1556,1,1552,0,"INT"],[3806,1556,2,1552,1,"INT"],[3808,1250,0,1556,0,"IMAGE"]],Z=[{id:5,title:"Txt2Img（テキストから描画）",bounding:[-4236.4716796875,344.34796142578125,1060,1053.5999755859375],color:"#b0b0b0",font_size:24,flags:{}},{id:6,title:"KSampler（描画）",bounding:[-3078.45068359375,484.4197082519531,2272.801025390625,1249.6265869140625],color:"#b0b0b0",font_size:24,flags:{}},{id:11,title:"ControlNet",bounding:[-5634.43701171875,532.0531005859375,1344.4208984375,548.72705078125],color:"#ababab",font_size:24,flags:{}}],ee={},te={ds:{scale:.6303940863128702,offset:[4503.910996535225,-129.597771250219]},groupNodes:{}},oe=.4,se={last_node_id:q,last_link_id:J,nodes:Q,links:Y,groups:Z,config:ee,extra:te,version:oe},ae=1556,ne=3808,ie=[{id:1101,type:"ImpactKSamplerBasicPipe",pos:[-2388.449951171875,568.0198364257812],size:[370,570],flags:{},order:15,mode:0,inputs:[{name:"basic_pipe",type:"BASIC_PIPE",link:2816},{name:"latent_image",type:"LATENT",link:3802},{name:"scheduler_func_opt",type:"SCHEDULER_FUNC",link:null,shape:7}],outputs:[{name:"BASIC_PIPE",type:"BASIC_PIPE",links:[],slot_index:0,shape:3},{name:"LATENT",type:"LATENT",links:[2814],slot_index:1,shape:3},{name:"VAE",type:"VAE",links:null,shape:3}],properties:{"Node name for S&R":"ImpactKSamplerBasicPipe"},widgets_values:[555639338001183,"randomize",40,7,"euler_ancestral","karras",1],color:"#223",bgcolor:"#335",shape:1},{id:904,type:"CR Prompt Text",pos:[-4226.4716796875,737.9478759765625],size:[450,220],flags:{},order:0,mode:0,inputs:[],outputs:[{name:"prompt",type:"STRING",links:[3131],slot_index:0,shape:3},{name:"show_help",type:"STRING",links:null,shape:3}],title:"Positive Prompt",properties:{"Node name for S&R":"CR Prompt Text"},widgets_values:[`(beautiful modern Japanese Anime background art for anime film, cinematic, epic, realistic, sharp details, dramatic lighting:1.3),

(volume light source at top middle of the frame:1.3),

old elementary school building,
a schoolyard,
succor field and goals,
gymnasium,
countryside,
in Japan,
the wooded hill behind the school,
beautiful mountains,
blue sky,
white summer clouds,
sunny day,
around noon,
in summer,`],color:"#232",bgcolor:"#353",shape:1},{id:625,type:"ToBasicPipe",pos:[-2738.45068359375,558.019775390625],size:[320,110],flags:{collapsed:!1},order:14,mode:0,inputs:[{name:"model",type:"MODEL",link:3792},{name:"clip",type:"CLIP",link:3793},{name:"vae",type:"VAE",link:3781},{name:"positive",type:"CONDITIONING",link:3381},{name:"negative",type:"CONDITIONING",link:2545}],outputs:[{name:"basic_pipe",type:"BASIC_PIPE",links:[2816],slot_index:0,shape:3}],properties:{"Node name for S&R":"ToBasicPipe"},widgets_values:[],color:"#223",bgcolor:"#335",shape:1},{id:600,type:"Apply ControlNet Stack",pos:[-3068.45068359375,608.0198974609375],size:[300,70],flags:{collapsed:!1},order:13,mode:0,inputs:[{name:"positive",type:"CONDITIONING",link:3794},{name:"negative",type:"CONDITIONING",link:3773},{name:"cnet_stack",type:"CONTROL_NET_STACK",link:3772,shape:7}],outputs:[{name:"CONDITIONING+",type:"CONDITIONING",links:[3381],slot_index:0,shape:3},{name:"CONDITIONING-",type:"CONDITIONING",links:[2545],slot_index:1,shape:3}],properties:{"Node name for S&R":"Apply ControlNet Stack"},widgets_values:[],color:"#223",bgcolor:"#335",shape:1},{id:639,type:"VAELoader",pos:[-4226.4716796875,597.9478759765625],size:[450,60],flags:{},order:1,mode:0,inputs:[],outputs:[{name:"VAE",type:"VAE",links:[3781,3783],slot_index:0,shape:3}],properties:{"Node name for S&R":"VAELoader"},widgets_values:["sdxl_vae.safetensors"],color:"#232",bgcolor:"#353",shape:1},{id:498,type:"VAEDecode",pos:[-1975.650634765625,584.0463256835938],size:[210,50],flags:{collapsed:!1},order:16,mode:0,inputs:[{name:"samples",type:"LATENT",link:2814},{name:"vae",type:"VAE",link:3783}],outputs:[{name:"IMAGE",type:"IMAGE",links:[3784],slot_index:0,shape:3}],properties:{"Node name for S&R":"VAEDecode"},widgets_values:[],color:"#223",bgcolor:"#335",shape:1},{id:344,type:"SaveImage",pos:[-1725.6512451171875,564.0463256835938],size:[910,1160],flags:{},order:17,mode:0,inputs:[{name:"images",type:"IMAGE",link:3784}],outputs:[],properties:{"Node name for S&R":"SaveImage"},widgets_values:["animeBG3/abg3"],color:"#223",bgcolor:"#335",shape:1},{id:1249,type:"LoadImage",pos:[-5624.43701171875,620.7802124023438],size:[430,450],flags:{pinned:!1},order:2,mode:0,inputs:[],outputs:[{name:"IMAGE",type:"IMAGE",links:[3189],slot_index:0,shape:3},{name:"MASK",type:"MASK",links:null,slot_index:1,shape:3}],title:"Image for ControlNet",properties:{"Node name for S&R":"LoadImage_controlnet"},widgets_values:["","image"],color:"#323",bgcolor:"#535",shape:1},{id:907,type:"CR Prompt Text",pos:[-4226.4716796875,1007.9478759765625],size:[450,150],flags:{},order:3,mode:0,inputs:[],outputs:[{name:"prompt",type:"STRING",links:[2399],slot_index:0,shape:3},{name:"show_help",type:"STRING",links:null,shape:3}],title:"Negative Prompt",properties:{"Node name for S&R":"CR Prompt Text"},widgets_values:["fantasy, sci-fi, blurred, (lighting effects:1.3), two key-light sources, depth of field, outlines, sunset, morning light, Chinese culture, black and white, monochrome, "],color:"#232",bgcolor:"#353",shape:1},{id:1250,type:"DF_Image_scale_to_side",pos:[-5154.43701171875,630.7802734375],size:[360,140],flags:{collapsed:!1},order:5,mode:0,inputs:[{name:"image",type:"IMAGE",link:3189}],outputs:[{name:"IMAGE",type:"IMAGE",links:[3787,3808],slot_index:0,shape:3}],properties:{"Node name for S&R":"DF_Image_scale_to_side"},widgets_values:[1216,"Longest","nearest-exact","disabled"],color:"#323",bgcolor:"#535",shape:1},{id:1276,type:"AIO_Preprocessor",pos:[-5110.01611328125,835.6531372070312],size:[320,80],flags:{},order:7,mode:0,inputs:[{name:"image",type:"IMAGE",link:3787}],outputs:[{name:"IMAGE",type:"IMAGE",links:[3786],slot_index:0,shape:3}],properties:{"Node name for S&R":"AIO_Preprocessor"},widgets_values:["TEEDPreprocessor",1216],color:"#323",bgcolor:"#535",shape:1},{id:1271,type:"CR Multi-ControlNet Stack",pos:[-4710.01611328125,605.6531372070312],size:[410,460],flags:{collapsed:!1},order:11,mode:0,inputs:[{name:"image_1",type:"IMAGE",link:3786,shape:7},{name:"image_2",type:"IMAGE",link:null,shape:7},{name:"image_3",type:"IMAGE",link:null,shape:7},{name:"controlnet_stack",type:"CONTROL_NET_STACK",link:null,shape:7}],outputs:[{name:"CONTROLNET_STACK",type:"CONTROL_NET_STACK",links:[3772],slot_index:0,shape:3},{name:"show_help",type:"STRING",links:null,shape:3}],properties:{"Node name for S&R":"CR Multi-ControlNet Stack"},widgets_values:["On","mistoLine_rank256.safetensors",.9500000000000001,0,.9500000000000001,"Off","control-lora-depth-rank256.safetensors",.6,0,.8,"Off","control-lora-depth-rank256.safetensors",.85,0,.966],color:"#323",bgcolor:"#535",shape:1},{id:1556,type:"GetImageSizeAndCount",pos:[-4226.4716796875,1207.9478759765625],size:[280,90],flags:{},order:8,mode:0,inputs:[{name:"image",type:"IMAGE",link:3808}],outputs:[{name:"image",type:"IMAGE",links:null},{name:"1216 width",type:"INT",links:[3805],slot_index:1},{name:"861 height",type:"INT",links:[3806],slot_index:2},{name:"1 count",type:"INT",links:null}],properties:{"Node name for S&R":"GetImageSizeAndCount"}},{id:1552,type:"SDXLEmptyLatentSizePicker+",pos:[-3916.47265625,1217.9478759765625],size:[340,170],flags:{},order:12,mode:0,inputs:[{name:"width_override",type:"INT",link:3805,widget:{name:"width_override"}},{name:"height_override",type:"INT",link:3806,widget:{name:"height_override"}}],outputs:[{name:"LATENT",type:"LATENT",links:[3802],slot_index:0},{name:"width",type:"INT",links:null},{name:"height",type:"INT",links:null}],properties:{"Node name for S&R":"SDXLEmptyLatentSizePicker+"},widgets_values:["1024x1024 (1.0)",1,0,0]},{id:794,type:"CheckpointLoaderSimple",pos:[-4226.4716796875,417.9479675292969],size:[450,100],flags:{},order:4,mode:0,inputs:[],outputs:[{name:"MODEL",type:"MODEL",links:[3792],slot_index:0,shape:3},{name:"CLIP",type:"CLIP",links:[3693],slot_index:1,shape:3},{name:"VAE",type:"VAE",links:[],slot_index:2,shape:3}],properties:{"Node name for S&R":"CheckpointLoaderSimple"},widgets_values:["HONOO-anime-BG_01_.safetensors"],color:"#232",bgcolor:"#353",shape:1},{id:1198,type:"CLIPSetLastLayer",pos:[-3736.47265625,437.9479675292969],size:[220,60],flags:{},order:6,mode:0,inputs:[{name:"clip",type:"CLIP",link:3693}],outputs:[{name:"CLIP",type:"CLIP",links:[3776,3777,3793],slot_index:0,shape:3}],properties:{"Node name for S&R":"CLIPSetLastLayer"},widgets_values:[-1],color:"#232",bgcolor:"#353",shape:1},{id:1224,type:"CLIPTextEncode",pos:[-3396.47265625,617.9478759765625],size:[210,80],flags:{collapsed:!1},order:9,mode:0,inputs:[{name:"clip",type:"CLIP",link:3776},{name:"text",type:"STRING",link:3131,widget:{name:"text"}}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[3794],slot_index:0,shape:3}],properties:{"Node name for S&R":"CLIPTextEncode"},widgets_values:["(Accordion cable:1.4). (mechanical details:1.5), (outlines:1.2),  fog, photorealism, worst quality, (trees, plants, green, grass:1.3), text, watermark, nude"],color:"#232",bgcolor:"#353",shape:1},{id:896,type:"CLIPTextEncode",pos:[-3396.47265625,747.9478759765625],size:[210,70],flags:{collapsed:!1},order:10,mode:0,inputs:[{name:"clip",type:"CLIP",link:3777},{name:"text",type:"STRING",link:2399,widget:{name:"text"}}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[3773],slot_index:0,shape:3}],properties:{"Node name for S&R":"CLIPTextEncode"},widgets_values:["(Accordion cable:1.4). (mechanical details:1.5), (outlines:1.2),  fog, photorealism, worst quality, (trees, plants, green, grass:1.3), text, watermark, nude"],color:"#232",bgcolor:"#353",shape:1}],le=[[2399,907,0,896,1,"STRING"],[2545,600,1,625,4,"CONDITIONING"],[2814,1101,1,498,0,"LATENT"],[2816,625,0,1101,0,"BASIC_PIPE"],[3131,904,0,1224,1,"STRING"],[3189,1249,0,1250,0,"IMAGE"],[3381,600,0,625,3,"CONDITIONING"],[3693,794,1,1198,0,"CLIP"],[3772,1271,0,600,2,"CONTROL_NET_STACK"],[3773,896,0,600,1,"CONDITIONING"],[3776,1198,0,1224,0,"CLIP"],[3777,1198,0,896,0,"CLIP"],[3781,639,0,625,2,"VAE"],[3783,639,0,498,1,"VAE"],[3784,498,0,344,0,"IMAGE"],[3786,1276,0,1271,0,"IMAGE"],[3787,1250,0,1276,0,"IMAGE"],[3792,794,0,625,0,"MODEL"],[3793,1198,0,625,1,"CLIP"],[3794,1224,0,600,0,"CONDITIONING"],[3802,1552,0,1101,1,"LATENT"],[3805,1556,1,1552,0,"INT"],[3806,1556,2,1552,1,"INT"],[3808,1250,0,1556,0,"IMAGE"]],pe=[{id:5,title:"Txt2Img（テキストから描画）",bounding:[-4236.4716796875,344.34796142578125,1060,1053.5999755859375],color:"#b0b0b0",font_size:24,flags:{}},{id:6,title:"KSampler（描画）",bounding:[-3078.45068359375,484.4197082519531,2272.801025390625,1249.6265869140625],color:"#b0b0b0",font_size:24,flags:{}},{id:11,title:"ControlNet",bounding:[-5634.43701171875,532.0531005859375,1344.4208984375,548.72705078125],color:"#ababab",font_size:24,flags:{}}],re={},de={ds:{scale:.6303940863128702,offset:[4503.910996535225,-129.597771250219]},groupNodes:{}},me=.4,ue={last_node_id:ae,last_link_id:ne,nodes:ie,links:le,groups:pe,config:re,extra:de,version:me},ke=P({__name:"confirm",setup(ce){const{lookStyle:I,base64:f,imageFile:S,promptA:m,promptB:u,promptC:c,promptD:g,customWorkflow:ge,retryCount:O}=C(),k=j(),L=F(),_=v(!1),G=R(()=>h().public.COMFYUI_GENERATE_ENABLED),w=()=>{y().alert({title:"ComfyUI Queue Disabled",message:"この環境では画像生成が許可されていません。",icon:"prohibited"})},b=async()=>{_.value=!0;try{if(!I)throw new Error("背景美術スタイルが選択されていません");let t;if(h().public.USE_API_FOR_GENERATION){const s=await D().optimize(f,512e3),{original_image_id:p}=await k.upload.originalImage(s),{workflow:e}=await k.template.workflow({backgroundArtStyleId:I.id,prompt:[m,u,c,g].join(" "),retry_count:O,original_image_id:p});t=e}else{const{name:s}=await L.upload.image(S);t=h().public.ENVIRONMENT==="local"?ue:se,t&&typeof t=="object"&&"nodes"in t&&t.nodes.forEach(e=>{e.type==="CLIPTextEncode"&&Array.isArray(e.widgets_values)&&e.widgets_values.length>0&&(m.length>0&&(e.widgets_values[0]=`${String(e.widgets_values[0])},What to draw,${m.join(",")}`),u.length>0&&(e.widgets_values[0]=`${String(e.widgets_values[0])},Environment around,${u.join(",")}`),c.length>0&&(e.widgets_values[0]=`${String(e.widgets_values[0])},Color tone and mood,${c.join(",")}`),g.length>0&&(e.widgets_values[0]=`${String(e.widgets_values[0])},Lighting,${g.join(",")}`))}),typeof t=="object"&&t!==null&&"nodes"in t&&t.nodes.forEach(e=>{const r=e;r.type==="LoadImage"&&(r.widgets_values=r.widgets_values.map(T=>typeof T=="string"?s:T))})}C().setWorkflow(t),M().push(A().OUTPUT)}catch(t){_.value=!1,t instanceof z?y().error(t):y().error({title:"Generate Error",message:"生成に失敗しました。",icon:"exclamation",button:"閉じる",code:V.UnknownError,name:"UnknownError"})}},x=()=>{B(A().GENERATE_UPLOAD)};return(t,s)=>{const p=$,e=K,r=U;return i(),l(e,{class:"pageGenerateConfirm",gap:"28"},{default:a(()=>[n(p,null,{default:a(()=>[n(H,{icon:"document",title:"設定内容の確認",body:"設定内容をご確認ください"})]),_:1}),n(p,null,{default:a(()=>[n(e,{justify:"stretch",gap:"32"},{default:a(()=>[n(e,{justify:"stretch",gap:"8"},{default:a(()=>[o(I)?(i(),l(W,{key:0,class:"pageGenerateConfirm-lookstyle",data:o(I)},null,8,["data"])):d("",!0),o(f)?(i(),l(X,{key:1,data:o(f)},null,8,["data"])):d("",!0),o(m)?(i(),l(N,{key:2,data:o(m),name:"何を描くか"},null,8,["data"])):d("",!0),o(u)?(i(),l(N,{key:3,data:o(u),name:"周りの環境"},null,8,["data"])):d("",!0),o(c)?(i(),l(N,{key:4,data:o(c),name:"色調・ムード"},null,8,["data"])):d("",!0),o(g)?(i(),l(N,{key:5,data:o(g),name:"ライティング"},null,8,["data"])):d("",!0)]),_:1}),n(e,{justify:"stretch",gap:"8"},{default:a(()=>[n(r,{loading:o(_),disabled:!o(G),onClick:b,onDisabledClick:w},{default:a(()=>s[0]||(s[0]=[E(" 生成する ")])),_:1},8,["loading","disabled"]),n(r,{minimal:"",disabled:o(_),onClick:x},{default:a(()=>s[1]||(s[1]=[E(" 設定を変更する ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ke as default};
