import{d as T,c as N,o as r,a as b,w as t,b as R,e as I,m as Q,v as ue,r as F,f as B,n as te,u as re,_ as z,g as x,h as g,i as ae,j as V,k as e,l as L,t as O,p as H,q as W,F as j,s as se,x as ie,y as G,z as Y,A as ce,B as de,C as A,D as me,E as pe,G as q,H as fe,I as _e,J as ge,K as ve,L as ye,M as K,N as he,O as we,P as be,Q as $,R as X,S as Se,T as ke,U as P,V as $e,W as Ce,X as Me,Y as De,Z}from"./D3Ft7b30.js";import{_ as Ue}from"./TKPFZSjc.js";import{u as ee}from"./DuSZBVOy.js";const ze=["id"],Ie=["for"],J=T({__name:"Switch",props:{name:{type:String,default:"switch",required:!0},modelValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(f,{emit:C}){const l=f,i=C,u=N(()=>({_checked:c.value,_disabled:l.disabled,_readonly:l.readonly})),m=N(()=>`switch-${l.name}`),c=N({get:()=>l.modelValue,set:M=>{i("update:modelValue",M)}}),v=N(()=>!!re().default);return(M,y)=>{const D=z,o=x;return r(),b(o,{class:te(["switch",u.value]),gap:"8",align:"start"},{default:t(()=>[R(I("input",Q({id:m.value,"onUpdate:modelValue":y[0]||(y[0]=a=>c.value=a),type:"checkbox",class:"switch-input"},{disabled:f.disabled,readonly:f.readonly,name:f.name}),null,16,ze),[[ue,c.value]]),I("label",{for:m.value,class:"switch-handle"},null,8,Ie),v.value?(r(),b(D,{key:0,tag:"label",for:m.value,class:"switch-label",caption2:""},{default:t(()=>[F(M.$slots,"default")]),_:3},8,["for"])):B("",!0)]),_:3},8,["class"])}}}),xe={class:"devMenu"},oe=T({__name:"DevMenu",props:{name:{type:String,default:""},open:{type:Boolean,default:!1},children:{type:Array,default:()=>[]}},setup(f){const C=f,l=g(C.open),i=g(0),u=N(()=>C.children.length>0),m=()=>{u.value&&(l.value=!l.value)},c=v=>"children"in v;return(v,M)=>{const y=oe,D=ae("resize");return r(),V("div",xe,[e(x,{class:"devMenu-header",justify:"between",align:"center",gap:"8",onClick:m},{default:t(()=>[e(z,{class:"devMenu-header-txt",body:"",bold:"",lineclamp:"1"},{default:t(()=>[L(O(f.name),1)]),_:1}),u.value?(r(),b(H,{key:0,class:"devMenu-header-icon",name:l.value?"arrowUp":"arrowDown",size:"10"},null,8,["name"])):B("",!0)]),_:1}),e(W,{h:i.value},{default:t(()=>[e(Ue,null,{default:t(()=>[u.value?R((r(),b(W,{key:0,class:"devMenu-children"},{default:t(()=>[(r(!0),V(j,null,se(f.children,(o,a)=>(r(),V(j,{key:`devMenu-children-item-${a}`},[c(o)?(r(),b(y,Q({key:0,ref_for:!0},o),null,16)):(r(),b(ie,{key:1,class:"devMenu-children-item","active-class":"_current",to:{name:o.page}},{default:t(()=>[e(z,{caption1:"",bold:"",lineclamp:"1"},{default:t(()=>[L(O(o.name),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))]),_:1})),[[G,l.value],[D,o=>i.value=o.height]]):B("",!0)]),_:1})]),_:1},8,["h"])])}}}),Ve={class:"devHeader-menus"},Le={class:"devHeader-menus-inner-list"},qe=T({__name:"DevHeader",props:Y({close:{type:Boolean,default:!1}},{showMenu:{type:Boolean,required:!1},showMenuModifiers:{}}),emits:Y(["close","darkmode","sizeAuto"],["update:showMenu"]),setup(f,{emit:C}){const l=ce(),i=de(f,"showMenu"),u=C,m=g(A().darkmode.value),c=g(A().sizeType.value==="auto"),v=g(""),M=me().getRoutes(),y=g([]),D=()=>{const o=M,a=we().path.value,s={name:"Dev",children:[],open:!1};o.forEach(n=>{if(!n.path.startsWith(a))return;const S=n.path.replace(a,"").split("/").filter(p=>p.length>0);let _=s;S.forEach((p,h)=>{if(h===S.length-1)_.children.push({name:p.charAt(0).toUpperCase()+p.slice(1).replace(/-/g," "),page:n.name});else{let d=_.children.find(w=>"children"in w&&w.name.toLowerCase()===p);d||(d={name:p.charAt(0).toUpperCase()+p.slice(1),children:[],open:!1},_.children.push(d)),_=d}})}),y.value=s.children.filter(n=>"children"in n&&"open"in n&&!("page"in n))};return pe(()=>{const o=l.name;for(const a of y.value)for(const s of a.children)s.page===o&&(a.open=!0,v.value=s.name)}),q(()=>l.path,o=>{i.value=!1},{immediate:!0}),q(()=>m.value,o=>{A().setDarkmode(o),u("darkmode",o)}),q(()=>c.value,o=>{o?A().setSizeType("auto"):A().setSizeType("px"),u("sizeAuto",o)}),fe(()=>{D()}),(o,a)=>(r(),b(he,{class:"devHeader",full:"","no-padding":""},{default:t(()=>[e(_e,null,{left:t(()=>[F(o.$slots,"left")]),center:t(()=>[e(z,{body:"",bold:""},{default:t(()=>[e(x,{class:"devHeader-title",gap:"8",justify:"center",align:"center",onClick:a[0]||(a[0]=s=>i.value=!i.value)},{default:t(()=>[L(O(v.value)+" ",1),e(H,{name:"arrowDown",size:"10"})]),_:1})]),_:1})]),right:t(()=>[f.close?(r(),b(H,{key:0,name:"cross",size:"20",onClick:a[1]||(a[1]=s=>u("close"))})):B("",!0)]),_:3}),e(ge,null,{default:t(()=>[R(e(ve,{class:"devHeader-overlay",soft:"",onClick:a[2]||(a[2]=s=>i.value=!1)},null,512),[[G,i.value]])]),_:1}),e(ye,{y:"-20"},{default:t(()=>[R(I("div",Ve,[e(K,{class:"devHeader-menus-inner"},{default:t(()=>[I("div",Le,[(r(!0),V(j,null,se(y.value,(s,n)=>(r(),b(oe,Q({key:`global-${n}`,class:"devHeader-menus-inner-list-item",ref_for:!0},s),null,16))),128))]),e(K,{class:"devHeader-menus-inner-mode",gap:"8"},{default:t(()=>[F(o.$slots,"footer"),e(x,{justify:"between",align:"center",nowrap:""},{default:t(()=>[e(z,{body:"",bold:""},{default:t(()=>a[5]||(a[5]=[L(" Darkmode ")])),_:1}),I("div",null,[e(J,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=s=>m.value=s),name:"devDarkmode"},null,8,["modelValue"])])]),_:1}),e(x,{justify:"between",align:"center",nowrap:""},{default:t(()=>[e(z,{body:"",bold:""},{default:t(()=>a[6]||(a[6]=[L(" SizeType Auto ")])),_:1}),I("div",null,[e(J,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=s=>c.value=s),name:"devSizetype"},null,8,["modelValue"])])]),_:1})]),_:3})]),_:3})],512),[[G,i.value]])]),_:3})]),_:3}))}}),Be={class:"pageDev"},Re=T({__name:"dev",setup(f){const C=be(),l=De(),i=g(0),u=g(!1),m=g(!1),c=g(0),v=g(!0),M=()=>{Se().push(ke().DASHBOARD)},y=()=>{var s,n,S,_,p,h,d,w,k,U;(s=document.querySelector("body > .comfyui-body-top"))==null||s.classList.toggle("_show"),(n=document.querySelector("body > .comfyui-body-right"))==null||n.classList.toggle("_show"),(S=document.querySelector("body > .comfyui-body-bottom"))==null||S.classList.toggle("_show"),(_=document.querySelector("body > .comfyui-body-left"))==null||_.classList.toggle("_show"),(p=document.querySelector("body > .comfy-menu"))==null||p.classList.toggle("_show"),(h=document.querySelector("body > .graph-canvas-container"))==null||h.classList.toggle("_show"),(d=document.querySelector("body > .pysssss-image-feed"))==null||d.classList.toggle("_show"),(w=document.querySelector("body > .p-toast"))==null||w.classList.toggle("_show"),(k=document.querySelector("body > #vue-app"))==null||k.classList.toggle("_show"),Z().public.COMFYUI_GENERATE_ENABLED||(U=document.querySelector(".queue-button-group"))==null||U.classList.toggle("_disabled"),m.value=!1},D=async()=>{if(!await P().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"<mark>Step 1. Upload Image</mark> 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const s=await ee().select(["image"]),n=await l.upload.image(s.file);if(!await P().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br /><mark>Step 2. Select Workflow.json</mark> 👈",buttonName:"Select Workflow.json"}}))return;const S=await ee().select(["json"]),_=new FileReader;_.readAsText(S.file),_.onload=async p=>{var w;const h=(w=p.target)==null?void 0:w.result,d=JSON.parse(h);d.nodes&&d.nodes.forEach(k=>{k.type==="LoadImage"&&k.widgets_values&&(k.widgets_values=k.widgets_values.map(U=>typeof U=="string"?n.name:U))}),await l.loadGraph(JSON.stringify(d)),v.value=!1}},o=async()=>{c.value=0,await l.queuePrompt()},a=async()=>{c.value=0,await l.postInterrupt()};return q(()=>u.value,s=>{y(),s&&!Z().public.COMFYUI_GENERATE_ENABLED&&P().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),q(()=>i.value,s=>{var n;(n=document.querySelector("body > .comfyui-body-top"))==null||n.style.setProperty("top",`${s}px`)}),q(()=>l.progress.value,s=>{c.value=s}),(s,n)=>{const S=z,_=W,p=J,h=H,d=$e,w=x,k=qe,U=Ce,ne=Me,le=ae("resize");return r(),V("div",Be,[$(C).path.includes("login")?B("",!0):R((r(),b(k,{key:0,"show-menu":$(m),"onUpdate:showMenu":n[1]||(n[1]=E=>X(m)?m.value=E:null),class:"pageDev-menu",close:"",onClose:M},{left:t(()=>[e(w,{align:"center",gap:"16",nowrap:""},{default:t(()=>[e(p,{modelValue:$(u),"onUpdate:modelValue":n[0]||(n[0]=E=>X(u)?u.value=E:null),name:"showComfyUI"},{default:t(()=>[e(_,{pt:"2"},{default:t(()=>[e(S,{caption3:"",bold:"",unselectable:""},{default:t(()=>n[2]||(n[2]=[L(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),$(u)?(r(),V(j,{key:0},[e(d,{xsmall:"",w:"16",h:"16",disabled:$(v)||$(c)>0,onClick:o},{default:t(()=>[e(h,{name:"play",color:"light"})]),_:1},8,["disabled"]),e(d,{xsmall:"",w:"16",h:"16",disabled:$(c)===0,onClick:a},{default:t(()=>[e(h,{name:"pause",color:"light"})]),_:1},8,["disabled"]),e(d,{xsmall:"",link:"",w:"16",h:"16",onClick:D},{default:t(()=>[e(h,{name:"upload",size:"16"})]),_:1})],64)):B("",!0)]),_:1})]),_:1},8,["show-menu"])),[[le,E=>i.value=E.height]]),e(ne,{class:te(["pageDev-pages",{_hide:$(u)}]),center:"","top-space":$(i),"bottom-space":"50"},{default:t(()=>[e(U)]),_:1},8,["class","top-space"])])}}});export{Re as default};
