import{ac as y,ai as o,c as $,a as c,w as i,H as b,o as u,G as E,ad as f,ak as g,ay as S,ao as j,al as x,u as e,b as z,d as v,ah as B,j as N,aH as I,s as O,C as A}from"./CD3lL2_T.js";import{_ as D}from"./BmBlJBC5.js";import"./luGxHvAh.js";const G={class:"pageJoin"},P=y({__name:"join",setup(H){const s=o(""),m=o(!1),n=o(""),t=o(""),r=o(!1),p=o(new Date().toISOString()),C=async()=>{m.value=!0,n.value="progress",t.value="";try{const{organization_id:l,organization_name:a}=await B().member.join.organization(s.value);await N().open({name:"joinOrganization",options:{id:l,name:a}})}catch(l){if(n.value="ng",t.value="無効な招待コードです。",!(l instanceof I))return O({statusCode:Number(A.UnknownError),statusMessage:"不明なエラーが発生しました。"})}finally{m.value=!1}},k=()=>{s.value="",n.value="",t.value="",r.value=!1,p.value=new Date().toISOString()};return(l,a)=>{const _=z,w=E,V=b;return u(),$("div",G,[c(V,{narrow:""},{default:i(()=>[c(w,{class:"pageGenerateConfirm",gap:"28"},{default:i(()=>[c(S,{icon:"code",title:"追加するコードをご入力ください"}),(u(),f(D,j({key:e(p),modelValue:e(s),"onUpdate:modelValue":a[0]||(a[0]=d=>x(s)?s.value=d:null)},{status:e(n),message:e(t)},{onValid:a[1]||(a[1]=d=>r.value=!0),onInvalid:a[2]||(a[2]=d=>r.value=!1)}),null,16,["modelValue"])),e(n)!=="ng"?(u(),f(_,{key:0,disabled:!e(r),loading:e(m),onClick:C},{default:i(()=>a[3]||(a[3]=[v(" 送信 ")])),_:1},8,["disabled","loading"])):g("",!0),e(n)==="ng"?(u(),f(_,{key:1,onClick:k},{default:i(()=>a[4]||(a[4]=[v(" クリア ")])),_:1})):g("",!0)]),_:1})]),_:1})])}}});export{P as default};
