import{d as N,c as q,o as u,a as _,w as t,b as A,e as V,m as Y,v as ae,r as P,f as B,n as X,u as ne,_ as U,g as z,h as v,i as Z,j as E,k as o,l as $,t as j,p as R,q as O,F as T,s as ee,x as le,y as G,z as Q,A as ue,B as re,C as L,D as de,E as ce,G as x,H as ie,I as me,J as fe,K as pe,L as _e,M as W,N as ve,O as ye,P as ge,Q as D,R as J,S as he,T as be,U as we,V as ke,W as $e,X as Ce,Y as K,Z as Se}from"./CbE87QEY.js";import{_ as Me}from"./B__QQDst.js";const De=["id"],Ue=["for"],F=N({__name:"Switch",props:{name:{type:String,default:"switch",required:!0},modelValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:b}){const n=m,r=b,l=q(()=>({_checked:i.value,_disabled:n.disabled,_readonly:n.readonly})),d=q(()=>`switch-${n.name}`),i=q({get:()=>n.modelValue,set:w=>{r("update:modelValue",w)}}),y=q(()=>!!ne().default);return(w,p)=>{const C=U,a=z;return u(),_(a,{class:X(["switch",l.value]),gap:"8",align:"start"},{default:t(()=>[A(V("input",Y({id:d.value,"onUpdate:modelValue":p[0]||(p[0]=e=>i.value=e),type:"checkbox",class:"switch-input"},{disabled:m.disabled,readonly:m.readonly,name:m.name}),null,16,De),[[ae,i.value]]),V("label",{for:d.value,class:"switch-handle"},null,8,Ue),y.value?(u(),_(C,{key:0,tag:"label",for:d.value,class:"switch-label",caption2:""},{default:t(()=>[P(w.$slots,"default")]),_:3},8,["for"])):B("",!0)]),_:3},8,["class"])}}}),Ve={class:"devMenu"},te=N({__name:"DevMenu",props:{name:{type:String,default:""},open:{type:Boolean,default:!1},children:{type:Array,default:()=>[]}},setup(m){const b=m,n=v(b.open),r=v(0),l=q(()=>b.children.length>0),d=()=>{l.value&&(n.value=!n.value)},i=y=>"children"in y;return(y,w)=>{const p=te,C=Z("resize");return u(),E("div",Ve,[o(z,{class:"devMenu-header",justify:"between",align:"center",gap:"8",onClick:d},{default:t(()=>[o(U,{class:"devMenu-header-txt",body:"",bold:"",lineclamp:"1"},{default:t(()=>[$(j(m.name),1)]),_:1}),l.value?(u(),_(R,{key:0,class:"devMenu-header-icon",name:n.value?"arrowUp":"arrowDown",size:"10"},null,8,["name"])):B("",!0)]),_:1}),o(O,{h:r.value},{default:t(()=>[o(Me,null,{default:t(()=>[l.value?A((u(),_(O,{key:0,class:"devMenu-children"},{default:t(()=>[(u(!0),E(T,null,ee(m.children,(a,e)=>(u(),E(T,{key:`devMenu-children-item-${e}`},[i(a)?(u(),_(p,Y({key:0,ref_for:!0},a),null,16)):(u(),_(le,{key:1,class:"devMenu-children-item","active-class":"_current",to:{name:a.page}},{default:t(()=>[o(U,{caption1:"",bold:"",lineclamp:"1"},{default:t(()=>[$(j(a.name),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))]),_:1})),[[G,n.value],[C,a=>r.value=a.height]]):B("",!0)]),_:1})]),_:1},8,["h"])])}}}),ze={class:"devHeader-menus"},Ee={class:"devHeader-menus-inner-list"},xe=N({__name:"DevHeader",props:Q({close:{type:Boolean,default:!1}},{showMenu:{type:Boolean,required:!1},showMenuModifiers:{}}),emits:Q(["close","darkmode","sizeAuto"],["update:showMenu"]),setup(m,{emit:b}){const n=ue(),r=re(m,"showMenu"),l=b,d=v(L().darkmode.value),i=v(L().sizeType.value==="auto"),y=v(""),w=de().getRoutes(),p=v([]),C=()=>{const a=w,e=ye().path.value,s={name:"Dev",children:[],open:!1};a.forEach(c=>{if(!c.path.startsWith(e))return;const S=c.path.replace(e,"").split("/").filter(f=>f.length>0);let g=s;S.forEach((f,k)=>{if(k===S.length-1)g.children.push({name:f.charAt(0).toUpperCase()+f.slice(1).replace(/-/g," "),page:c.name});else{let h=g.children.find(M=>"children"in M&&M.name.toLowerCase()===f);h||(h={name:f.charAt(0).toUpperCase()+f.slice(1),children:[],open:!1},g.children.push(h)),g=h}})}),p.value=s.children.filter(c=>"children"in c&&"open"in c&&!("page"in c))};return ce(()=>{const a=n.name;for(const e of p.value)for(const s of e.children)s.page===a&&(e.open=!0,y.value=s.name)}),x(()=>n.path,a=>{r.value=!1},{immediate:!0}),x(()=>d.value,a=>{L().setDarkmode(a),l("darkmode",a)}),x(()=>i.value,a=>{a?L().setSizeType("auto"):L().setSizeType("px"),l("sizeAuto",a)}),ie(()=>{C()}),(a,e)=>(u(),_(ve,{class:"devHeader",full:"","no-padding":""},{default:t(()=>[o(me,null,{left:t(()=>[P(a.$slots,"left")]),center:t(()=>[o(U,{body:"",bold:""},{default:t(()=>[o(z,{class:"devHeader-title",gap:"8",justify:"center",align:"center",onClick:e[0]||(e[0]=s=>r.value=!r.value)},{default:t(()=>[$(j(y.value)+" ",1),o(R,{name:"arrowDown",size:"10"})]),_:1})]),_:1})]),right:t(()=>[m.close?(u(),_(R,{key:0,name:"cross",size:"20",onClick:e[1]||(e[1]=s=>l("close"))})):B("",!0)]),_:3}),o(fe,null,{default:t(()=>[A(o(pe,{class:"devHeader-overlay",soft:"",onClick:e[2]||(e[2]=s=>r.value=!1)},null,512),[[G,r.value]])]),_:1}),o(_e,{y:"-20"},{default:t(()=>[A(V("div",ze,[o(W,{class:"devHeader-menus-inner"},{default:t(()=>[V("div",Ee,[(u(!0),E(T,null,ee(p.value,(s,c)=>(u(),_(te,Y({key:`global-${c}`,class:"devHeader-menus-inner-list-item",ref_for:!0},s),null,16))),128))]),o(W,{class:"devHeader-menus-inner-mode",gap:"8"},{default:t(()=>[P(a.$slots,"footer"),o(z,{justify:"between",align:"center",nowrap:""},{default:t(()=>[o(U,{body:"",bold:""},{default:t(()=>e[5]||(e[5]=[$(" Darkmode ")])),_:1}),V("div",null,[o(F,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=s=>d.value=s),name:"devDarkmode"},null,8,["modelValue"])])]),_:1}),o(z,{justify:"between",align:"center",nowrap:""},{default:t(()=>[o(U,{body:"",bold:""},{default:t(()=>e[6]||(e[6]=[$(" SizeType Auto ")])),_:1}),V("div",null,[o(F,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=s=>i.value=s),name:"devSizetype"},null,8,["modelValue"])])]),_:1})]),_:3})]),_:3})],512),[[G,r.value]])]),_:3})]),_:3}))}}),Be={class:"pageDev"},qe=N({__name:"dev",setup(m){const b=ge(),n=Ce(),r=v(0),l=v(!1),d=v(!1),i=v(0),y=()=>{he().push(be().DASHBOARD)},w=()=>{var e,s,c,S,g,f,k,h,M,H;(e=document.querySelector("body > .comfyui-body-top"))==null||e.classList.toggle("_show"),(s=document.querySelector("body > .comfyui-body-right"))==null||s.classList.toggle("_show"),(c=document.querySelector("body > .comfyui-body-bottom"))==null||c.classList.toggle("_show"),(S=document.querySelector("body > .comfyui-body-left"))==null||S.classList.toggle("_show"),(g=document.querySelector("body > .comfy-menu"))==null||g.classList.toggle("_show"),(f=document.querySelector("body > .graph-canvas-container"))==null||f.classList.toggle("_show"),(k=document.querySelector("body > .pysssss-image-feed"))==null||k.classList.toggle("_show"),(h=document.querySelector("body > .p-toast"))==null||h.classList.toggle("_show"),(M=document.querySelector("body > #vue-app"))==null||M.classList.toggle("_show"),K().public.COMFYUI_GENERATE_ENABLED||(H=document.querySelector(".queue-button-group"))==null||H.classList.toggle("_disabled"),d.value=!1},p=async()=>{console.log(await n.getObjectInfo())},C=async()=>{console.log(await n.getPrompt())},a=async()=>{i.value=0,console.log(await n.postInterrupt())};return x(()=>l.value,e=>{w(),e&&!K().public.COMFYUI_GENERATE_ENABLED&&Se().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),x(()=>r.value,e=>{var s;(s=document.querySelector("body > .comfyui-body-top"))==null||s.style.setProperty("top",`${e}px`)}),x(()=>n.progress.value,e=>{i.value=e}),(e,s)=>{const c=U,S=O,g=F,f=R,k=we,h=z,M=xe,H=ke,se=$e,oe=Z("resize");return u(),E("div",Be,[D(b).path.includes("login")?B("",!0):A((u(),_(M,{key:0,"show-menu":D(d),"onUpdate:showMenu":s[1]||(s[1]=I=>J(d)?d.value=I:null),class:"pageDev-menu",close:"",onClose:y},{left:t(()=>[o(h,{align:"center",gap:"16",nowrap:""},{default:t(()=>[o(g,{modelValue:D(l),"onUpdate:modelValue":s[0]||(s[0]=I=>J(l)?l.value=I:null),name:"showComfyUI"},{default:t(()=>[o(S,{pt:"2"},{default:t(()=>[o(c,{caption3:"",bold:"",unselectable:""},{default:t(()=>s[2]||(s[2]=[$(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),D(l)?(u(),E(T,{key:0},[o(k,{xsmall:"",w:"16",h:"16",disabled:D(i)===0,onClick:a},{default:t(()=>[o(f,{name:"pause",color:"light"})]),_:1},8,["disabled"]),o(k,{xsmall:"",link:"","no-padding":"",h:"16",onClick:p},{default:t(()=>s[3]||(s[3]=[$(" GET /object_info ")])),_:1}),o(k,{xsmall:"",link:"","no-padding":"",h:"16",onClick:C},{default:t(()=>s[4]||(s[4]=[$(" GET /prompt ")])),_:1})],64)):B("",!0)]),_:1})]),_:1},8,["show-menu"])),[[oe,I=>r.value=I.height]]),o(se,{class:X(["pageDev-pages",{_hide:D(l)}]),center:"","top-space":D(r),"bottom-space":"50"},{default:t(()=>[o(H)]),_:1},8,["class","top-space"])])}}});export{qe as default};
