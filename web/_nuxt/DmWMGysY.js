import{d as $,x as s,f as l,g as y,z as d,w as u,i as f,m as E,Y as a,Z as x,A as _,l as v,a as C,a0 as N,e as S,c as z,ai as A,s as B,C as I,a2 as U,U as D,V as O}from"./CelK7s9M.js";import{_ as j}from"./C26RaeK_.js";import{_ as J}from"./cmtQziRk.js";import"./dTwqeMnx.js";import"./eg5O4npm.js";const P={class:"pageJoin"},Y=$({__name:"join",setup(R){const n=s(""),m=s(!1),t=s(""),r=s(""),i=s(!1),p=s(new Date().toISOString()),k=async()=>{m.value=!0,t.value="progress",r.value="";try{await C().member.join.organization(n.value);const{list:o}=await C().user.availableUsersAccount(),e=o[o.length-1];await N().open({name:"message",options:{title:"Join",content:`Organization ID: ${e.organization_id} に加入しました`,icon:"checkCircleLine",buttonName:"ダッシュボードへ"}}),S().push(z().dashboard())}catch(o){if(t.value="ng",r.value="無効な招待コードです。",!(o instanceof A))return B({statusCode:Number(I.UnknownError),statusMessage:"不明なエラーが発生しました。"})}finally{m.value=!1}},w=()=>{n.value="",t.value="",r.value="",i.value=!1,p.value=new Date().toISOString()};return(o,e)=>{const g=U,V=D,b=O;return l(),y("div",P,[d(b,{narrow:""},{default:u(()=>[d(V,{class:"pageGenerateConfirm",gap:"28"},{default:u(()=>[d(j,{icon:"code",title:"追加するコードをご入力ください"}),(l(),f(J,E({key:a(p),modelValue:a(n),"onUpdate:modelValue":e[0]||(e[0]=c=>x(n)?n.value=c:null)},{status:a(t),message:a(r)},{onValid:e[1]||(e[1]=c=>i.value=!0),onInvalid:e[2]||(e[2]=c=>i.value=!1)}),null,16,["modelValue"])),a(t)!=="ng"?(l(),f(g,{key:0,disabled:!a(i),loading:a(m),onClick:k},{default:u(()=>e[3]||(e[3]=[_(" 送信 ")])),_:1},8,["disabled","loading"])):v("",!0),a(t)==="ng"?(l(),f(g,{key:1,onClick:w},{default:u(()=>e[4]||(e[4]=[_(" クリア ")])),_:1})):v("",!0)]),_:1})]),_:1})])}}});export{Y as default};
