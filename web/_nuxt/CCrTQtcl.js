import{d as $,x as s,f as i,g as y,z as c,w as u,aa as E,i as f,m as b,Y as a,Z as x,A as g,l as v,a as z,a0 as S,as as B,s as N,C as j,a2 as A,U as I,V as O}from"./HME51i6F.js";import{_ as U}from"./DEihPX6w.js";import"./CiB_bUWu.js";const D={class:"pageJoin"},R=$({__name:"join",setup(G){const o=s(""),m=s(!1),n=s(""),t=s(""),r=s(!1),p=s(new Date().toISOString()),C=async()=>{m.value=!0,n.value="progress",t.value="";try{const{organization_id:l,organization_name:e}=await z().member.join.organization(o.value);await S().open({name:"joinOrganization",options:{id:l,name:e}})}catch(l){if(n.value="ng",t.value="無効な招待コードです。",!(l instanceof B))return N({statusCode:Number(j.UnknownError),statusMessage:"不明なエラーが発生しました。"})}finally{m.value=!1}},k=()=>{o.value="",n.value="",t.value="",r.value=!1,p.value=new Date().toISOString()};return(l,e)=>{const _=A,w=I,V=O;return i(),y("div",D,[c(V,{narrow:""},{default:u(()=>[c(w,{class:"pageGenerateConfirm",gap:"28"},{default:u(()=>[c(E,{icon:"code",title:"追加するコードをご入力ください"}),(i(),f(U,b({key:a(p),modelValue:a(o),"onUpdate:modelValue":e[0]||(e[0]=d=>x(o)?o.value=d:null)},{status:a(n),message:a(t)},{onValid:e[1]||(e[1]=d=>r.value=!0),onInvalid:e[2]||(e[2]=d=>r.value=!1)}),null,16,["modelValue"])),a(n)!=="ng"?(i(),f(_,{key:0,disabled:!a(r),loading:a(m),onClick:C},{default:u(()=>e[3]||(e[3]=[g(" 送信 ")])),_:1},8,["disabled","loading"])):v("",!0),a(n)==="ng"?(i(),f(_,{key:1,onClick:k},{default:u(()=>e[4]||(e[4]=[g(" クリア ")])),_:1})):v("",!0)]),_:1})]),_:1})])}}});export{R as default};
