import{ai as j,g as u,p as d,w as n,I as G,d as B,k as g,f as T,G as C,l as o,m as S,aj as V,t as A,h as i,q as x,H as D,v as O,V as P,z as F,ab as U,i as z,r as I,o as J,a9 as E,s as R,a as M,ak as q,ah as H,J as W,al as K,M as Q,N as X,ag as w,ac as L,e as N,c as $,F as Y,B as Z,am as ee}from"./H9sU-Lyy.js";import{_ as te}from"./Cy9bI0E-.js";import{_ as ae}from"./T5HE0BgI.js";import"./B3szof3F.js";const se={};function oe(m,r){const p=te;return u(),d(p,{per:240/530*100,class:"lookStyleRatio"},{default:n(()=>[G(m.$slots,"default")]),_:3})}const ne=j(se,[["render",oe]]),re={class:"lookStyle-image"},le={class:"lookStyle-name"},v=B({__name:"LookStyle",props:{data:{type:Object,default:()=>({})},current:{type:Boolean,default:!1}},setup(m){const r=m,p=g(()=>r.data.name),_=g(()=>r.data.id),f=g(()=>r.data.thumbnail_path);return(k,b)=>{const h=P,e=F;return u(),T("div",{class:O(["lookStyle",{_current:m.current}])},[C("div",re,[o(f)?(u(),d(h,S({key:0},{src:o(f)},{cover:""}),null,16)):o(_)?(u(),d(ae,V(S({key:1},{id:o(_)})),null,16)):A("",!0)]),C("div",le,[i(ne,null,{default:n(()=>[i(e,{title1:"",extrabold:"",center:"",unselectable:"",color:"light"},{default:n(()=>[x(D(o(p)),1)]),_:1})]),_:1})])],2)}}}),de=B({__name:"lookstyle",setup(m){const r={id:-1,name:"Custom Load",thumbnail_path:"https://cdn.pixabay.com/photo/2023/02/27/15/15/abstract-7818693_1280.jpg"},p=ee(),_=U(),{lookStyle:f}=z(_),k=I([]),b=e=>{const l=k.value.find(t=>t.id===e);l&&(_.setLookStyle(l),N().push($().GENERATE_UPLOAD))},h=async()=>{const e=await p.select(["json"]),l=e.blob,t=async c=>new Promise((y,a)=>{const s=new FileReader;s.onload=()=>y(s.result),s.onerror=()=>a(new Error("ファイルの読み込みに失敗しました")),s.readAsText(c)});try{const y=await(await fetch(l)).blob(),a=await t(y),s={...r,name:e.name.replace(".json","")};_.setLookStyle(s),_.setCustomWorkflow(JSON.parse(a)),N().push($().GENERATE_UPLOAD)}catch(c){console.error("JSONの変換に失敗しました:",c)}};return J(async()=>{var e,l;if(!E().active)return R("利用プランが選択されていません。");try{const t=await M().template.lookStyle(((e=E().active)==null?void 0:e.id)??0);(l=t.list)!=null&&l.length&&(k.value=t.list.map(c=>({...c,thumbnail_path:""})))}catch(t){if(t instanceof q)H().error(t);else return R("ルックスタイルの取得に失敗しました。")}}),(e,l)=>{const t=Y,c=Z,y=W;return u(),d(y,{class:"pageGenerateLookstyle",gap:"28"},{default:n(()=>[i(t,null,{default:n(()=>[i(K,{icon:"paintBrush",title:"ルックスタイルを選択してください",body:"プロジェクト専用のスタイルを選び、<br />作品の世界観を引き立てましょう。"})]),_:1}),i(t,{wide:""},{default:n(()=>[i(c,{justify:"center",gap:"8",split:"2"},{default:n(()=>[(u(!0),T(X,null,Q(o(k),a=>(u(),d(L,{key:a.id,class:"pageGenerateLookstyle-item",onClick:s=>b(a.id)},{default:n(()=>{var s;return[i(v,{data:a,current:a.id===((s=o(f))==null?void 0:s.id)},null,8,["data","current"])]}),_:2},1032,["onClick"]))),128)),("useRuntimeConfig"in e?e.useRuntimeConfig:o(w))().public.DEV_ENABLED&&("useRuntimeConfig"in e?e.useRuntimeConfig:o(w))().public.ENVIRONMENT==="local"?(u(),d(L,{key:0,class:"pageGenerateLookstyle-item",onClick:h},{default:n(()=>{var a;return[i(v,{data:r,current:r.id===((a=o(f))==null?void 0:a.id)},null,8,["current"])]}),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})}}});export{de as default};
