import{d as F,h as A,f as c,i as w,w as t,j as H,k as I,m as K,v as re,r as W,l as E,p as se,q as ie,_ as z,t as q,x as h,y as oe,g as V,z as e,A as L,B as G,D as T,E as J,F as P,G as ne,H as ce,I as Q,J as X,K as de,L as me,M as R,N as pe,O as fe,P as B,o as _e,Q as ve,R as ye,S as ge,T as he,U as Z,V as we,W as be,u as ke,X as Se,Y as S,Z as ee,e as $e,c as Ce,$ as te,a0 as O,a1 as ae,a2 as Me,a3 as De,a4 as Ue,a5 as xe}from"./DHmO57dV.js";import{_ as ze}from"./DJhff3Ec.js";const Ie=["id"],qe=["for"],Y=F({__name:"Switch",props:{name:{type:String,default:"switch",required:!0},modelValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:$}){const n=v,d=$,l=A(()=>({_checked:r.value,_disabled:n.disabled,_readonly:n.readonly})),p=A(()=>`switch-${n.name}`),r=A({get:()=>n.modelValue,set:C=>{d("update:modelValue",C)}}),b=A(()=>!!ie().default);return(C,y)=>{const D=z,o=q;return c(),w(o,{class:se(["switch",l.value]),gap:"8",align:"start"},{default:t(()=>[H(I("input",K({id:p.value,"onUpdate:modelValue":y[0]||(y[0]=s=>r.value=s),type:"checkbox",class:"switch-input"},{disabled:v.disabled,readonly:v.readonly,name:v.name}),null,16,Ie),[[re,r.value]]),I("label",{for:p.value,class:"switch-handle"},null,8,qe),b.value?(c(),w(D,{key:0,tag:"label",for:p.value,class:"switch-label",caption2:""},{default:t(()=>[W(C.$slots,"default")]),_:3},8,["for"])):E("",!0)]),_:3},8,["class"])}}}),Ve={class:"devMenu"},le=F({__name:"DevMenu",props:{name:{type:String,default:""},open:{type:Boolean,default:!1},children:{type:Array,default:()=>[]}},setup(v){const $=v,n=h($.open),d=h(0),l=A(()=>$.children.length>0),p=()=>{l.value&&(n.value=!n.value)},r=b=>"children"in b;return(b,C)=>{const y=le,D=oe("resize");return c(),V("div",Ve,[e(q,{class:"devMenu-header",justify:"between",align:"center",gap:"8",onClick:p},{default:t(()=>[e(z,{class:"devMenu-header-txt",body:"",bold:"",lineclamp:"1"},{default:t(()=>[L(G(v.name),1)]),_:1}),l.value?(c(),w(T,{key:0,class:"devMenu-header-icon",name:n.value?"arrowUp":"arrowDown",size:"10"},null,8,["name"])):E("",!0)]),_:1}),e(J,{h:d.value},{default:t(()=>[e(ze,null,{default:t(()=>[l.value?H((c(),w(J,{key:0,class:"devMenu-children"},{default:t(()=>[(c(!0),V(P,null,ne(v.children,(o,s)=>(c(),V(P,{key:`devMenu-children-item-${s}`},[r(o)?(c(),w(y,K({key:0,ref_for:!0},o),null,16)):(c(),w(ce,{key:1,class:"devMenu-children-item","active-class":"_current",to:{name:o.page}},{default:t(()=>[e(z,{caption1:"",bold:"",lineclamp:"1"},{default:t(()=>[L(G(o.name),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))]),_:1})),[[Q,n.value],[D,o=>d.value=o.height]]):E("",!0)]),_:1})]),_:1},8,["h"])])}}}),Le={class:"devHeader-menus"},Be={class:"devHeader-menus-inner-list"},Ee=F({__name:"DevHeader",props:X({close:{type:Boolean,default:!1}},{showMenu:{type:Boolean,required:!1},showMenuModifiers:{}}),emits:X(["close","darkmode","sizeAuto"],["update:showMenu"]),setup(v,{emit:$}){const n=de(),d=me(v,"showMenu"),l=$,p=h(R().darkmode.value),r=h(R().sizeType.value==="auto"),b=h(""),C=pe().getRoutes(),y=h([]),D=()=>{const o=C,s=be().path.value,i={name:"Dev",children:[],open:!1};o.forEach(a=>{if(!a.path.startsWith(s))return;const u=a.path.replace(s,"").split("/").filter(m=>m.length>0);let g=i;u.forEach((m,M)=>{if(M===u.length-1)g.children.push({name:m.charAt(0).toUpperCase()+m.slice(1).replace(/-/g," "),page:a.name});else{let f=g.children.find(_=>"children"in _&&_.name.toLowerCase()===m);f||(f={name:m.charAt(0).toUpperCase()+m.slice(1),children:[],open:!1},g.children.push(f)),g=f}})}),y.value=i.children.filter(a=>"children"in a&&"open"in a&&!("page"in a))};return fe(()=>{const o=n.name;for(const s of y.value)for(const i of s.children)i.page===o&&(s.open=!0,b.value=i.name)}),B(()=>n.path,o=>{d.value=!1},{immediate:!0}),B(()=>p.value,o=>{R().setDarkmode(o),l("darkmode",o)}),B(()=>r.value,o=>{o?R().setSizeType("auto"):R().setSizeType("px"),l("sizeAuto",o)}),_e(()=>{D()}),(o,s)=>(c(),w(we,{class:"devHeader",full:"","no-padding":""},{default:t(()=>[e(ve,null,{left:t(()=>[W(o.$slots,"left")]),center:t(()=>[e(z,{body:"",bold:""},{default:t(()=>[e(q,{class:"devHeader-title",gap:"8",justify:"center",align:"center",onClick:s[0]||(s[0]=i=>d.value=!d.value)},{default:t(()=>[L(G(b.value)+" ",1),e(T,{name:"arrowDown",size:"10"})]),_:1})]),_:1})]),right:t(()=>[v.close?(c(),w(T,{key:0,name:"cross",size:"20",onClick:s[1]||(s[1]=i=>l("close"))})):E("",!0)]),_:3}),e(ye,null,{default:t(()=>[H(e(ge,{class:"devHeader-overlay",soft:"",onClick:s[2]||(s[2]=i=>d.value=!1)},null,512),[[Q,d.value]])]),_:1}),e(he,{y:"-20"},{default:t(()=>[H(I("div",Le,[e(Z,{class:"devHeader-menus-inner"},{default:t(()=>[I("div",Be,[(c(!0),V(P,null,ne(y.value,(i,a)=>(c(),w(le,K({key:`global-${a}`,class:"devHeader-menus-inner-list-item",ref_for:!0},i),null,16))),128))]),e(Z,{class:"devHeader-menus-inner-mode",gap:"8"},{default:t(()=>[W(o.$slots,"footer"),e(q,{justify:"between",align:"center",nowrap:""},{default:t(()=>[e(z,{body:"",bold:""},{default:t(()=>s[5]||(s[5]=[L(" Darkmode ")])),_:1}),I("div",null,[e(Y,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=i=>p.value=i),name:"devDarkmode"},null,8,["modelValue"])])]),_:1}),e(q,{justify:"between",align:"center",nowrap:""},{default:t(()=>[e(z,{body:"",bold:""},{default:t(()=>s[6]||(s[6]=[L(" SizeType Auto ")])),_:1}),I("div",null,[e(Y,{modelValue:r.value,"onUpdate:modelValue":s[4]||(s[4]=i=>r.value=i),name:"devSizetype"},null,8,["modelValue"])])]),_:1})]),_:3})]),_:3})],512),[[Q,d.value]])]),_:3})]),_:3}))}}),Ne={class:"pageDev"},He=F({__name:"dev",setup(v){const $=ke(),n=xe(),d=h(0),l=h(!1),p=h(!1),r=h(0),b=h(!0),C=()=>{$e().push(Ce().dashboard())},y=a=>{var u,g,m,M,f,_,U,k,x,j;(u=document.querySelector("body > .comfyui-body-top"))==null||u.classList.toggle("_show",a),(g=document.querySelector("body > .comfyui-body-right"))==null||g.classList.toggle("_show",a),(m=document.querySelector("body > .comfyui-body-bottom"))==null||m.classList.toggle("_show",a),(M=document.querySelector("body > .comfyui-body-left"))==null||M.classList.toggle("_show",a),(f=document.querySelector("body > .comfy-menu"))==null||f.classList.toggle("_show",a),(_=document.querySelector("body > .graph-canvas-container"))==null||_.classList.toggle("_show",a),(U=document.querySelector("body > .pysssss-image-feed"))==null||U.classList.toggle("_show",a),(k=document.querySelector("body > .p-toast"))==null||k.classList.toggle("_show",a),(x=document.querySelector("body > #vue-app"))==null||x.classList.toggle("_show",a),te().public.COMFYUI_GENERATE_ENABLED||(j=document.querySelector(".queue-button-group"))==null||j.classList.toggle("_disabled"),p.value=!1},D=async()=>{if(!await O().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"<mark>Step 1. Upload Image</mark> 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const a=await ae().select(["image"]),u=await n.upload.image(a.file);if(!await O().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br /><mark>Step 2. Select Workflow.json</mark> 👈",buttonName:"Select Workflow.json"}}))return;const g=await ae().select(["json"]),m=new FileReader;m.readAsText(g.file),m.onload=async M=>{var U;const f=(U=M.target)==null?void 0:U.result,_=JSON.parse(f);_.nodes&&_.nodes.forEach(k=>{k.type==="LoadImage"&&k.widgets_values&&(k.widgets_values=k.widgets_values.map(x=>typeof x=="string"?u.name:x))}),await n.loadGraph(JSON.stringify(_)),b.value=!1}},o=async()=>{r.value=0,await n.queuePrompt()},s=async()=>{r.value=0,await n.postInterrupt()},i=async()=>{await n.queueClear()};return B(()=>l.value,a=>{y(a),a&&!te().public.COMFYUI_GENERATE_ENABLED&&O().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),B(()=>d.value,a=>{var u;(u=document.querySelector("body > .comfyui-body-top"))==null||u.style.setProperty("top",`${a}px`)}),B(()=>n.progress.value,a=>{r.value=a}),Se(()=>{l.value=!1,y(!1)}),(a,u)=>{const g=z,m=J,M=Y,f=T,_=Me,U=q,k=Ee,x=De,j=Ue,ue=oe("resize");return c(),V("div",Ne,[S($).path.includes("login")?E("",!0):H((c(),w(k,{key:0,"show-menu":S(p),"onUpdate:showMenu":u[1]||(u[1]=N=>ee(p)?p.value=N:null),class:"pageDev-menu",close:"",onClose:C},{left:t(()=>[e(U,{align:"center",gap:"16",nowrap:""},{default:t(()=>[e(M,{modelValue:S(l),"onUpdate:modelValue":u[0]||(u[0]=N=>ee(l)?l.value=N:null),name:"showComfyUI"},{default:t(()=>[e(m,{pt:"2"},{default:t(()=>[e(g,{caption3:"",bold:"",unselectable:""},{default:t(()=>u[2]||(u[2]=[L(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),S(l)?(c(),V(P,{key:0},[e(_,{xsmall:"",w:"16",h:"16",disabled:S(r)>0,onClick:o},{default:t(()=>[e(f,{name:"play",color:"light"})]),_:1},8,["disabled"]),e(_,{xsmall:"",w:"16",h:"16",disabled:S(r)===0,onClick:s},{default:t(()=>[e(f,{name:"pause",color:"light"})]),_:1},8,["disabled"]),e(_,{xsmall:"",link:"",w:"16",h:"16",onClick:D},{default:t(()=>[e(f,{name:"upload",size:"16"})]),_:1}),e(_,{xsmall:"",w:"16",h:"16",disabled:S(r)===0,onClick:i},{default:t(()=>[e(f,{name:"cross",color:"light"})]),_:1},8,["disabled"])],64)):E("",!0)]),_:1})]),_:1},8,["show-menu"])),[[ue,N=>d.value=N.height]]),e(j,{class:se(["pageDev-pages",{_hide:S(l)}]),center:"","top-space":S(d),"bottom-space":"50"},{default:t(()=>[e(x)]),_:1},8,["class","top-space"])])}}});export{He as default};
