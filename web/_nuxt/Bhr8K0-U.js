import{ac as L,ak as P,al as p,aJ as b,b9 as V,c as S,ay as A,an as k,a,u as s,ad as T,w as t,ao as x,aL as W,aI as U,I as G,ax as J,o as v,J as M,F as O,E as H,d as Q,az as Y,b as K,x as X,ae as Z,j as C,b5 as E,k as ee,l as ae,m as oe}from"./Bz2rvL1p.js";import{_ as te}from"./BPGht0TW.js";import{_ as se}from"./D-ZD4cl7.js";const ne={class:"pageDev"},re=L({__name:"dev",setup(le){const N=P(),c=ee(),w=p(0),l=p(!1),d=p(!1),i=p(0),D=p(!0),$=()=>{ae().push(oe().dashboard())},I=o=>{var e;document.body.classList.toggle("_showComfyui",o),U().public.COMFYUI_GENERATE_ENABLED||(e=document.querySelector(".queue-button-group"))==null||e.classList.toggle("_disabled"),d.value=!1},j=async()=>{if(!await C().open({name:"message",options:{icon:"image",title:"Set Workflow Step 1",content:"Step 1. Upload Image 👈<br />Step 2. Select Workflow.json",buttonName:"Select Genzu Image"}}))return;const o=await E().select(["image"]),e=await c.upload.image(o.file);if(!await C().open({name:"message",options:{icon:"text",title:"Set Workflow Step 2",content:"Step 1. Upload Image<br />Step 2. Select Workflow.json 👈",buttonName:"Select Workflow.json"}}))return;const y=await E().select(["json"]),_=new FileReader;_.readAsText(y.file),_.onload=async h=>{var f;const u=(f=h.target)==null?void 0:f.result,n=JSON.parse(u);n.nodes&&n.nodes.forEach(r=>{r.type==="LoadImage"&&r.widgets_values&&(r.widgets_values=r.widgets_values.map(g=>typeof g=="string"?e.name:g))}),await c.loadGraph(JSON.stringify(n)),D.value=!1}},B=async()=>{i.value=0,await c.queuePrompt()},F=async()=>{i.value=0,await c.postInterrupt()},R=async()=>{await c.queueClear()};return b(()=>l.value,o=>{I(o),o&&!U().public.COMFYUI_GENERATE_ENABLED&&C().open({name:"message",options:{icon:"prohibited",title:"Queue Disabled",content:"この環境は画像生成が許可されていません。<br />ご注意ください。"}})}),b(()=>w.value,o=>{var e;(e=document.querySelector("body > .comfyui-body-top"))==null||e.style.setProperty("top",`${o}px`)}),b(()=>c.progress.value,o=>{i.value=o}),V(()=>{l.value=!1,I(!1)}),(o,e)=>{const y=H,_=O,h=te,u=X,n=K,f=M,r=se,g=Z,q=G,z=J("resize");return v(),S("div",ne,[s(N).path.includes("login")?k("",!0):A((v(),T(r,{key:0,"show-menu":s(d),"onUpdate:showMenu":e[1]||(e[1]=m=>x(d)?d.value=m:null),class:"pageDev-menu",close:"",onClose:$},{left:t(()=>[a(f,{align:"center",gap:"16",nowrap:""},{default:t(()=>[a(h,{modelValue:s(l),"onUpdate:modelValue":e[0]||(e[0]=m=>x(l)?l.value=m:null),name:"showComfyUI"},{default:t(()=>[a(_,{pt:"2"},{default:t(()=>[a(y,{caption3:"",bold:"",unselectable:""},{default:t(()=>e[2]||(e[2]=[Q(" ComfyUI ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),s(l)?(v(),S(Y,{key:0},[a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)>0,onClick:B},{default:t(()=>[a(u,{name:"play",color:"light"})]),_:1},8,["disabled"]),a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)===0,onClick:F},{default:t(()=>[a(u,{name:"pause",color:"light"})]),_:1},8,["disabled"]),a(n,{xsmall:"",link:"",w:"16",h:"16",onClick:j},{default:t(()=>[a(u,{name:"upload",size:"16"})]),_:1}),a(n,{xsmall:"",w:"16",h:"16",disabled:s(i)===0,onClick:R},{default:t(()=>[a(u,{name:"cross",color:"light"})]),_:1},8,["disabled"])],64)):k("",!0)]),_:1})]),_:1},8,["show-menu"])),[[z,m=>w.value=m.height]]),a(q,{class:W(["pageDev-pages",{_hide:s(l)}]),center:"","top-space":s(w),"bottom-space":"50"},{default:t(()=>[a(g)]),_:1},8,["class","top-space"])])}}});export{re as default};
